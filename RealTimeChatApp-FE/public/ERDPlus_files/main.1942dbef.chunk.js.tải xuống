(this["webpackJsonperdplus.web"]=this["webpackJsonperdplus.web"]||[]).push([[0],{213:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(1),n=a.n(i),o=a(18),r=a.n(o),l=(a(213),a(22)),c=a(9),d=a(189),h=a(371),m=a(7),p=a(299),u=a(337),b=a(341),j=a(17),g=a(21);const{Types:x,Creators:O}=Object(g.createActions)({login:["email","password","history"],loginSuccess:["session"],loginFailure:null,logout:["history"],logoutSuccess:null,verifyToken:["history"],verifyTokenSuccess:["session"],verifyTokenFailure:null,googleLogin:["idToken","history"],setShowSocialMigrationWarning:["show"]}),y=Object(g.createReducer)({verifyTokenComplete:!1,isLoggedIn:!1,session:{},showSocialMigrationWarning:!1},{[x.LOGIN]:e=>e,[x.LOGIN_SUCCESS]:(e,t)=>({...e,session:t.session,isLoggedIn:!0}),[x.LOGIN_FAILURE]:e=>e,[x.LOGOUT]:e=>e,[x.LOGOUT_SUCCESS]:e=>({...e,isLoggedIn:!1,session:{},showSocialMigrationWarning:!1}),[x.VERIFY_TOKEN]:e=>e,[x.VERIFY_TOKEN_SUCCESS]:(e,t)=>({...e,session:t.session,isLoggedIn:!0,verifyTokenComplete:!0}),[x.VERIFY_TOKEN_FAILURE]:e=>({...e,isLoggedIn:!1,verifyTokenComplete:!0,showSocialMigrationWarning:!1}),[x.GOOGLE_LOGIN]:e=>e,[x.SET_SHOW_SOCIAL_MIGRATION_WARNING]:(e,t)=>({...e,showSocialMigrationWarning:t.show})}),C=x;var f=O;const{Types:S,Creators:w}=Object(g.createActions)({setBusy:null,clearBusy:null,showToast:["message","err"],hideToast:null}),D=Object(g.createReducer)({busy:!1,toast:!1,toastMessage:""},{[S.SET_BUSY]:e=>({...e,busy:!0}),[S.CLEAR_BUSY]:e=>({...e,busy:!1}),[S.SHOW_TOAST]:(e,t)=>{var a,s,i;const n=null===t||void 0===t||null===(a=t.err)||void 0===a||null===(s=a.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.errors;return"number"===typeof(null===n||void 0===n?void 0:n.length)&&n.length>0?{...e,toast:!0,toastMessage:n[0]}:{...e,toast:!0,toastMessage:t.message}},[S.HIDE_TOAST]:e=>({...e,toast:!1})});var v=w,A=a(101),E=a.n(A),T=a(381),I=a(343),N=a(102),R=a.n(N),M=a(169),k=a.n(M),F=a(168),P=a.n(F),_=a(300);class L extends i.Component{constructor(...e){super(...e),this.handleLogout=()=>{this.props.logout(this.props.history)},this.hideToast=()=>{this.props.hideToast()},this.socialMigrateClose=()=>{this.props.setShowSocialMigrationWarning(!1)}}render(){const{isLoggedIn:e,showSocialMigrationWarning:t,name:a,busy:i,toast:n,toastMessage:o,classes:r,className:l}=this.props;return Object(s.jsx)("div",{className:l,children:Object(s.jsxs)("header",{className:r.header,children:[Object(s.jsx)(u.a,{position:"static",color:"primary",children:Object(s.jsxs)(b.a,{className:r.buttonCollection,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/",children:Object(s.jsx)(P.a,{})}),Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/about",children:"About"}),!e&&Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/standalone",children:"Try It!"}),e&&Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/account",children:a}),e&&Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/documents",children:"Documents"}),e&&Object(s.jsxs)("div",{className:r.buttonContainer,children:[Object(s.jsx)("span",{className:r.newTag,children:"New (Beta)"}),Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/sql-queries",children:"Sql"})]})]}),!i&&Object(s.jsxs)("div",{children:[e&&Object(s.jsx)(p.a,{className:r.button,onClick:this.handleLogout,children:"Logout"}),!e&&Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/create-account",children:"Signup"}),!e&&Object(s.jsx)(p.a,{className:r.button,component:j.a,to:"/login",children:"Login"})]}),i&&Object(s.jsx)(E.a,{className:r.spinner})]})}),Object(s.jsx)(T.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:n,autoHideDuration:7e3,onClose:this.hideToast,children:Object(s.jsx)(I.a,{"aria-describedby":"client-snackbar",className:r.snackbar,message:Object(s.jsxs)("span",{id:"client-snackbar",className:r.snackbarMessage,children:[Object(s.jsx)(R.a,{className:r.snackbarIcon}),o]}),action:Object(s.jsx)(_.a,{"aria-label":"Close",color:"inherit",className:r.snackbarClose,onClick:this.hideToast,children:Object(s.jsx)(k.a,{})},"close"),children:Object(s.jsx)(R.a,{})})})]})})}}var B=Object(m.a)((e=>({header:{zIndex:e.zIndex.appBar},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},button:{color:"#ffffff"},spinner:{animation:"$rotator 1.4s linear infinite",width:50,height:50},snackbar:{backgroundColor:e.palette.error.dark},snackbarClose:{padding:e.spacing(.5)},snackbarIcon:{opacity:.9,marginRight:e.spacing(1)},snackbarMessage:{display:"flex",alignItems:"center"},socialMigrate:{backgroundColor:e.palette.error.dark},socialMigrateMessage:{display:"flex",alignItems:"center",width:"500px"},buttonCollection:{display:"flex",justifyContent:"space-between"},buttonContainer:{position:"relative",display:"inline-block"},newTag:{position:"absolute",top:"-5px",left:"130%",width:"100px",transform:"translateX(-50%)",backgroundColor:"transparent",color:"white",padding:"2px 5px",fontSize:"10px",borderRadius:"3px"}})))(Object(l.f)(Object(c.b)((e=>({isLoggedIn:e.auth.isLoggedIn,showSocialMigrationWarning:e.auth.showSocialMigrationWarning,name:e.auth.session.name,busy:e.global.busy,toast:e.global.toast,toastMessage:e.global.toastMessage})),(e=>({logout:t=>e(f.logout(t)),hideToast:()=>e(v.hideToast()),setShowSocialMigrationWarning:t=>e(f.setShowSocialMigrationWarning(t))})))(L))),q=a(344),U=a(379),G=a(69),z=a(193);const{Types:W,Creators:H}=Object(g.createActions)({createAccount:["name","email","password","history"],getAccount:null,getAccountSuccess:["account"],getAccountFailure:null,editName:null,updateTemporaryName:["temporaryName"],cancelEditName:null,updateAccount:["name"],updateAccountSuccess:["account"],updateAccountFailure:null,editPassword:null,cancelEditPassword:null,changePassword:["currentPassword","newPassword"],changePasswordSuccess:null,changePasswordFailure:null,changeConfirmDeleteAccount:["confirmDeleteAccount"],deleteAccount:["history"],deleteAccountSuccess:null,deleteAccountFailure:null,doSocialMigration:["email","password","history"]}),K=Object(g.createReducer)({account:{},name:"",role:"",createdAt:"",temporaryName:"",showEditName:!1,showEditPassword:!1,confirmDeleteAccount:!1},{[W.CREATE_ACCOUNT]:e=>e,[W.GET_ACCOUNT]:e=>e,[W.GET_ACCOUNT_SUCCESS]:(e,t)=>({...e,account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt}),[W.GET_ACCOUNT_FAILURE]:e=>e,[W.EDIT_NAME]:e=>({...e,showEditName:!0,temporaryName:e.name}),[W.UPDATE_TEMPORARY_NAME]:(e,t)=>({...e,temporaryName:t.temporaryName}),[W.CANCEL_EDIT_NAME]:e=>({...e,showEditName:!1}),[W.UPDATE_ACCOUNT]:e=>e,[W.UPDATE_ACCOUNT_SUCCESS]:(e,t)=>({...e,showEditName:!1,account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt}),[W.UPDATE_ACCOUNT_FAILURE]:e=>e,[W.EDIT_PASSWORD]:e=>({...e,showEditPassword:!0}),[W.CANCEL_EDIT_PASSWORD]:e=>({...e,showEditPassword:!1}),[W.CHANGE_PASSWORD]:e=>e,[W.CHANGE_PASSWORD_SUCCESS]:e=>({...e,showEditPassword:!1}),[W.CHANGE_PASSWORD_FAILURE]:e=>({...e,showEditPassword:!1}),[W.CHANGE_CONFIRM_DELETE_ACCOUNT]:(e,t)=>({...e,confirmDeleteAccount:t.confirmDeleteAccount}),[W.DELETE_ACCOUNT]:e=>e,[W.DELETE_ACCOUNT_SUCCESS]:e=>e,[W.DELETE_ACCOUNT_FAILURE]:e=>e,[W.DO_SOCIAL_MIGRATION]:e=>e}),Y=W;var Q=H,V=a(351),$=a(376);class J extends i.Component{constructor(...e){super(...e),this.state={currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1,migrateEmail:"",isMigrateEmailDirty:!1},this.handleEditName=()=>{this.props.editName()},this.handleNameChange=e=>{const t=e.target.value;this.props.updateTemporaryName(t)},this.handleCancelEditName=()=>{this.props.cancelEditName()},this.handleSaveEditName=()=>{const{temporaryName:e,updateAccount:t}=this.props;t(e)},this.handleChangePassword=()=>{this.setState({currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1}),this.props.editPassword()},this.handleCancelChangePassword=()=>{this.props.cancelEditPassword()},this.handleSaveChangePassword=()=>{const{currentPassword:e,newPassword:t}=this.state;this.props.changePassword(e,t)},this.handleCurrentPasswordChange=e=>{this.setState({currentPassword:e.target.value,isCurrentPasswordDirty:!0})},this.handleNewPasswordChange=e=>{this.setState({newPassword:e.target.value,isNewPasswordDirty:!0})},this.handleNewPassword2Change=e=>{this.setState({newPassword2:e.target.value,isNewPassword2Dirty:!0})},this.handleMigrateEmailChange=e=>{this.setState({migrateEmail:e.target.value,isMigrateEmailDirty:!0})},this.handleSocialMigration=()=>{const{migrateEmail:e,newPassword:t}=this.state;this.props.doSocialMigration(e,t,this.props.history)},this.handleConfirmDeleteChanged=()=>{const{confirmDeleteAccount:e,changeConfirmDeleteAccount:t}=this.props;t(!e)},this.deleteAccount=()=>{this.props.deleteAccount(this.props.history)}}static getDerivedStateFromProps(e,t){return"string"===typeof e.account.email&&t.migrateEmail!==e.account.email?{migrateEmail:e.account.email}:null}componentDidMount(){window.gtag("event","page_view",{page_path:"/account"})}render(){const{classes:e,name:t,temporaryName:a,showEditName:i,showEditPassword:n,confirmDeleteAccount:o}=this.props,{identity:r}=this.props.session;let l=null;if(this.props.account.email){const t=this.props.account.email,{currentPassword:a,newPassword:i,newPassword2:o,isCurrentPasswordDirty:r,isNewPasswordDirty:c,isNewPassword2Dirty:d}=this.state,h=!a||i.length<8||i!==o,m=r&&0===a.length?"Enter current password":"",u=c&&i.length<8?"Password must be longer than 8 characters":"",b=d&&i!==o?"Passwords do not match":"";l=Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(z.a,{className:e.paper,elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h6",children:"Change Password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"body1",children:t})}),n&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"currentPassword",label:"Current Password",margin:"normal",className:e.textField,type:"password",helperText:m,value:a,onChange:this.handleCurrentPasswordChange})}),n&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"newPassword",label:"New Password",margin:"normal",className:e.textField,type:"password",helperText:u,value:i,onChange:this.handleNewPasswordChange})}),n&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"newPassword2",label:"Confirm New Password",margin:"normal",className:e.textField,type:"password",helperText:b,value:o,onChange:this.handleNewPassword2Change})}),Object(s.jsxs)(q.a,{item:!0,xs:12,className:e.buttonGridItem,children:[!n&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",onClick:this.handleChangePassword,children:"Change"}),n&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",onClick:this.handleCancelChangePassword,children:"Cancel"}),n&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",color:"primary",onClick:this.handleSaveChangePassword,disabled:h,children:"Save"})]})]})})}),Object(s.jsx)(q.a,{item:!0,xs:3})]})}let c=null;return this.props.account.googleId&&(c=Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(z.a,{className:e.paper,elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h6",children:"Logged in with Google"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"body1",children:this.props.account.googleId})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:3})]})),Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsx)(q.a,{container:!0,className:e.grid,spacing:3,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"Account Information"})})}),Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(z.a,{className:e.paper,elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h6",children:"Name"})}),Object(s.jsxs)(q.a,{item:!0,xs:12,children:[!i&&Object(s.jsx)(G.a,{variant:"body1",children:t}),i&&Object(s.jsx)(U.a,{id:"name",margin:"normal",className:e.textField,value:a,onChange:this.handleNameChange})]}),Object(s.jsxs)(q.a,{item:!0,xs:12,className:e.buttonGridItem,children:[!i&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",onClick:this.handleEditName,children:"Edit"}),i&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",onClick:this.handleCancelEditName,children:"Cancel"}),i&&Object(s.jsx)(p.a,{className:e.button,variant:"outlined",color:"primary",onClick:this.handleSaveEditName,children:"Save"})]})]})})}),Object(s.jsx)(q.a,{item:!0,xs:3})]}),"email"===r&&l,"google"===r&&c,Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(z.a,{className:e.paper,elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h6",children:"Delete Account"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(V.a,{control:Object(s.jsx)($.a,{checked:o,onChange:this.handleConfirmDeleteChanged}),label:"Permanently delete account. The account will be deleted as soon as you press 'Delete' below."})}),Object(s.jsx)(q.a,{item:!0,xs:12,className:e.buttonGridItem,children:!i&&Object(s.jsx)(p.a,{className:e.button,color:"primary",variant:o?"contained":"outlined",disabled:!o,onClick:this.deleteAccount,children:"Delete"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:3})]})]})}}var X=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{paddingTop:e.spacing(3),textAlign:"center"},paper:{padding:e.spacing(3)},textField:{width:"100%"},buttonGridItem:{width:"100%",textAlign:"right"},button:{marginLeft:e.spacing(1),width:120}})))(Object(l.f)(Object(c.b)((e=>({name:e.account.name,temporaryName:e.account.temporaryName,showEditName:e.account.showEditName,showEditPassword:e.account.showEditPassword,createdAt:e.account.createdAt,account:e.account.account,session:e.auth.session,confirmDeleteAccount:e.account.confirmDeleteAccount})),(e=>({editName:()=>e(Q.editName()),updateTemporaryName:t=>e(Q.updateTemporaryName(t)),cancelEditName:()=>e(Q.cancelEditName()),updateAccount:t=>e(Q.updateAccount(t)),editPassword:()=>e(Q.editPassword()),changePassword:(t,a)=>e(Q.changePassword(t,a)),cancelEditPassword:()=>e(Q.cancelEditPassword()),changeConfirmDeleteAccount:t=>e(Q.changeConfirmDeleteAccount(t)),deleteAccount:t=>e(Q.deleteAccount(t)),doSocialMigration:(t,a,s)=>e(Q.doSocialMigration(t,a,s))})))(J)));class Z extends i.Component{constructor(...e){super(...e),this.state={name:"",email:"",password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},this.handleSubmit=()=>{const{name:e,email:t,password:a}=this.state;this.props.createAccount(e,t,a,this.props.history)},this.handleNameChange=e=>{this.setState({name:e.target.value})},this.handleEmailChange=e=>{this.setState({email:e.target.value})},this.handlePasswordChange=e=>{this.setState({password:e.target.value,isPasswordDirty:!0})},this.handleConfirmPasswordChange=e=>{this.setState({confirmPassword:e.target.value,isConfirmPasswordDirty:!0})}}componentDidMount(){window.gtag("event","page_view",{page_path:"/create-account"})}render(){const{name:e,email:t,password:a,confirmPassword:i,isPasswordDirty:n,isConfirmPasswordDirty:o}=this.state,{classes:r}=this.props,l=!e||!t||!a||a.length<8||a!==i,c=n&&a.length<8?"Password must be longer than 8 characters":"",d=o&&a!==i?"Passwords do not match":"";return Object(s.jsxs)("section",{className:r.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,className:r.grid,spacing:0,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"Create Account"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"name",label:"Name",margin:"normal",className:r.textField,value:e,onChange:this.handleNameChange})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"email",label:"Email",margin:"normal",className:r.textField,value:t,onChange:this.handleEmailChange})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"password",label:"Password",margin:"normal",className:r.textField,value:a,onChange:this.handlePasswordChange,helperText:c,type:"password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:r.textField,value:i,onChange:this.handleConfirmPasswordChange,helperText:d,type:"password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{className:r.submitButton,variant:"outlined",color:"primary",disabled:l,onClick:this.handleSubmit,children:"Create Account"})})]})]})}}var ee=Object(m.a)((e=>({textField:{width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}})))(Object(l.f)(Object(c.b)((e=>({})),(e=>({createAccount:(t,a,s,i)=>e(Q.createAccount(t,a,s,i))})))(Z))),te=a(350),ae=a(170),se=a.n(ae);var ie=a(302),ne=a(352),oe=a(353),re=a(174),le=a.n(re),ce=a(173),de=a.n(ce),he=a(354),me=a(171),pe=a.n(me),ue=a(172),be=a.n(ue);class je extends i.Component{constructor(...e){super(...e),this.toggle=e=>{e.stopPropagation();const{folder:t,expandFolder:a,collapseFolder:s}=this.props;t.isOpen?s(t.id):a(t.id)},this.select=()=>{this.props.selectFolder(this.props.folder.id)}}render(){const{classes:e,folder:t,expandFolder:a,collapseFolder:i,selectFolder:n}=this.props,o=t.children.length>0,r=(l=ie.a,(e,t)=>{const a="function"===typeof e?t=>({root:e(t)}):{root:e};return Object(m.a)(a,t)((function(e){const{classes:t,className:a,...i}=e;return Object(s.jsx)(l,{className:se()(t.root,a),...i})}))})((e=>({height:48,paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(2)*t.depth})));var l;let c,d;o&&(c=t.isOpen?Object(s.jsx)(_.a,{className:e.iconButton,"aria-label":"Collapse",onClick:this.toggle,children:Object(s.jsx)(pe.a,{})}):Object(s.jsx)(_.a,{className:e.iconButton,"aria-label":"Expand",onClick:this.toggle,children:Object(s.jsx)(be.a,{})})),t.isSelected&&(d=e.selected);const h="root"===t.folderType?"Diagrams":t.name;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:d,children:Object(s.jsxs)(r,{button:!0,onClick:this.select,children:[Object(s.jsx)(ne.a,{children:t.isOpen?Object(s.jsx)(de.a,{}):Object(s.jsx)(le.a,{})}),Object(s.jsx)(oe.a,{inset:!0,primary:h}),c]})}),Object(s.jsx)(he.a,{in:t.isOpen,timeout:"auto",unmountOnExit:!0,children:Object(s.jsx)(te.a,{component:"div",disablePadding:!0,children:t.children.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>Object(s.jsx)(ge,{folder:e,expandFolder:a,collapseFolder:i,selectFolder:n},e.id)))})})]})}}const ge=Object(m.a)((e=>({iconButton:{margin:e.spacing(1)},listItemDefault:{height:48,paddingTop:0,paddingBottom:0},selected:{backgroundColor:e.palette.action.selected}})))(Object(c.b)((e=>({})),(e=>({})))(je));var xe=ge;class Oe extends i.Component{render(){const{classes:e,folderTree:t,expandFolder:a,collapseFolder:i,selectFolder:n}=this.props;return Object(s.jsx)(te.a,{className:e.root,component:"nav",children:t.map((e=>Object(s.jsx)(xe,{folder:e,expandFolder:a,collapseFolder:i,selectFolder:n},e.id)))})}}var ye=Object(m.a)((e=>({root:{height:"100%",width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(1)}})))(Object(c.b)((e=>({})),(e=>({})))(Oe)),Ce=a(60);const fe=e=>e.diagram.diagrams,Se=Object(Ce.a)([fe,e=>e.folder.currentFolderId],((e,t)=>e.filter((e=>e.folderId===t)))),we=Object(Ce.a)([fe,(e,t)=>t.history.location.pathname],((e,t)=>{const a=t.split("/");if(3===a.length&&"edit-diagram"===a[1]){const t=a[2];return e.find((e=>e.id===t))}return null}));var De=a(357),ve=a(175),Ae=a.n(ve),Ee=a(176),Te=a.n(Ee),Ie=a(192),Ne=a(355),Re=a(356);const{Types:Me,Creators:ke}=Object(g.createActions)({getDiagrams:null,getDiagramsSuccess:["diagrams"],getDiagramsFailure:null,saveDiagram:["diagram"],saveDiagramSuccess:["diagram"],saveDiagramFailure:null,createDiagram:["diagram"],createDiagramSuccess:["diagram"],createDiagramFailure:null,createDiagramDialogShow:null,setCreateDiagramName:["name"],setCreateDiagramType:["typ"],createDiagramDialogCancel:null,renameDiagramDialogShow:["diagram"],renameDiagramDialogCancel:null,renameDiagramNameChanged:["name"],importDiagramDialogShow:null,importDiagramDialogCancel:null,dropImportFile:["file","currentFolderId"],dropImportFileSuccess:["fileResult"],dropImportFileFailure:["fileResult"],removeImportFile:["index"],importDiagrams:["diagrams"],importDiagramsSuccess:["diagrams"],importDiagramsFailure:null,deleteDiagram:["diagramId"],deleteDiagramSuccess:null,deleteDiagramFailure:null,moveToFolderDialogShow:null,moveToFolderDialogCancel:null,saveManyDiagrams:["diagrams"],saveManyDiagramsSuccess:["diagrams"],saveManyDiagramsFailure:null,setDocumentsPageMode:["mode"]}),Fe=Object(g.createReducer)({diagrams:[],showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er",showRenameDiagramDialog:!1,showImportDiagramDialog:!1,showMoveToFolderDialog:!1,renameDiagramName:null,renameDiagramId:null,dropImportFileResults:[],documentsPageMode:"list"},{[Me.GET_DIAGRAMS]:e=>e,[Me.GET_DIAGRAMS_SUCCESS]:(e,t)=>({...e,diagrams:t.diagrams}),[Me.GET_DIAGRAMS_FAILURE]:e=>e,[Me.SAVE_DIAGRAM]:e=>e,[Me.SAVE_DIAGRAM_SUCCESS]:(e,t)=>{const a=e.diagrams.filter((e=>e.id!==t.diagram.id));return{...e,diagrams:[...a,t.diagram]}},[Me.SAVE_DIAGRAM_FAILURE]:e=>e,[Me.CREATE_DIAGRAM]:e=>e,[Me.CREATE_DIAGRAM_SUCCESS]:(e,t)=>{const a=e.diagrams;return{...e,diagrams:[...a,t.diagram],showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"}},[Me.CREATE_DIAGRAM_DIALOG_SHOW]:e=>({...e,showCreateDiagramDialog:!0}),[Me.CREATE_DIAGRAM_DIALOG_CANCEL]:e=>({...e,showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"}),[Me.SET_CREATE_DIAGRAM_NAME]:(e,t)=>({...e,createDiagramName:t.name}),[Me.SET_CREATE_DIAGRAM_TYPE]:(e,t)=>({...e,createDiagramType:t.typ}),[Me.RENAME_DIAGRAM_DIALOG_SHOW]:(e,t)=>({...e,showRenameDiagramDialog:!0,renameDiagramName:t.diagram.name,renameDiagramId:t.diagram.id}),[Me.RENAME_DIAGRAM_DIALOG_CANCEL]:e=>({...e,showRenameDiagramDialog:!1,renameDiagramName:"",renameDiagramId:null}),[Me.IMPORT_DIAGRAM_DIALOG_SHOW]:e=>({...e,showImportDiagramDialog:!0,dropImportFileResults:[]}),[Me.IMPORT_DIAGRAM_DIALOG_CANCEL]:e=>({...e,showImportDiagramDialog:!1}),[Me.DROP_IMPORT_FILE]:e=>e,[Me.DROP_IMPORT_FILE_SUCCESS]:(e,t)=>{const a=e.dropImportFileResults;return{...e,dropImportFileResults:[...a,t.fileResult]}},[Me.DROP_IMPORT_FILE_FAILURE]:(e,t)=>{const a=e.dropImportFileResults;return{...e,dropImportFileResults:[...a,t.fileResult]}},[Me.REMOVE_IMPORT_FILE]:(e,t)=>{const a=[...e.dropImportFileResults];return a.splice(t.index,1),{...e,dropImportFileResults:a}},[Me.RENAME_DIAGRAM_NAME_CHANGED]:(e,t)=>({...e,renameDiagramName:t.name}),[Me.IMPORT_DIAGRAMS]:e=>e,[Me.IMPORT_DIAGRAMS_SUCCESS]:(e,t)=>{const a=e.diagrams;return{...e,diagrams:[...a,...t.diagrams],dropImportFileResults:[],showImportDiagramDialog:!1}},[Me.IMPORT_DIAGRAMS_FAILURE]:e=>({...e,showImportDiagramDialog:!1}),[Me.DELETE_DIAGRAM]:e=>e,[Me.DELETE_DIAGRAM_SUCCESS]:e=>e,[Me.DELETE_DIAGRAM_FAILURE]:e=>e,[Me.MOVE_TO_FOLDER_DIALOG_SHOW]:e=>({...e,showMoveToFolderDialog:!0}),[Me.MOVE_TO_FOLDER_DIALOG_CANCEL]:e=>({...e,showMoveToFolderDialog:!1}),[Me.SAVE_MANY_DIAGRAMS]:e=>e,[Me.SAVE_MANY_DIAGRAMS_SUCCESS]:(e,t)=>{const a=t.diagrams.map((e=>e.id)),s=e.diagrams.filter((e=>-1===a.indexOf(e.id)));return{...e,documentsPageMode:"list",diagrams:[...s,...t.diagrams]}},[Me.SAVE_MANY_DIAGRAMS_FAILURE]:e=>({...e,documentsPageMode:"list"}),[Me.SET_DOCUMENTS_PAGE_MODE]:(e,t)=>({...e,documentsPageMode:t.mode})}),Pe=Me;var _e=ke;const{Types:Le,Creators:Be}=Object(g.createActions)({showConvertToRelationalDialog:["diagramId","name"],hideConvertToRelationalDialog:null,convertToRelational:["folderId","name","content","edit","history"],nameChanged:["name"],generateSql:["content"],generateSqlSuccess:["sql"],generateSqlFailure:null,hideConvertSqlDialog:null,setSqlCopied:null}),qe=Object(g.createReducer)({showDialog:!1,autoFocusName:!1,diagramId:0,name:"",sql:"",showConvertSqlDialog:!1,sqlCopied:!1},{[Le.SHOW_CONVERT_TO_RELATIONAL_DIALOG]:(e,t)=>({...e,showDialog:!0,autoFocusName:!0,diagramId:t.diagramId,name:t.name}),[Le.HIDE_CONVERT_TO_RELATIONAL_DIALOG]:e=>({...e,showDialog:!1,autoFocusName:!1}),[Le.CONVERT_TO_RELATIONAL]:e=>e,[Le.NAME_CHANGED]:(e,t)=>({...e,name:t.name,autoFocusName:!1}),[Le.GENERATE_SQL]:e=>e,[Le.GENERATE_SQL_SUCCESS]:(e,t)=>({...e,showConvertSqlDialog:!0,sqlCopied:!1,sql:t.sql}),[Le.GENERATE_SQL_FAILURE]:(e,t)=>({...e,showConvertSqlDialog:!0,sql:"Error"}),[Le.HIDE_CONVERT_SQL_DIALOG]:(e,t)=>({...e,showConvertSqlDialog:!1,sql:""}),[Le.SET_SQL_COPIED]:e=>({...e,sqlCopied:!0})}),Ue=Le;var Ge=Be;const ze=e=>e.folder.folders,We=Object(Ce.a)([ze,e=>e.folder.foldersMeta,e=>e.folder.currentFolderId],((e,t,a)=>{if(0===e.length)return[];const s=e.map((e=>({...t.find((t=>t.id===e.id)),...e,isSelected:e.id===a}))),i=s.find((e=>"root"===e.folderType)),n=s.find((e=>"trash"===e.folderType));i.depth=0,n.depth=0,n.children=[];const o=e=>{const t=s.filter((t=>t.parentId===e.id));t.forEach((t=>{t.depth=e.depth+1,o(t)})),e.children=t};return o(i),[i,n]})),He=(Object(Ce.a)([ze],(e=>{if(0===e.length)return[];const t=e.map((e=>({...e,isOpen:!1,isSelected:!1}))),a=t.find((e=>"root"===e.folderType));a.isOpen=!0,a.depth=0;const s=e=>{const a=t.filter((t=>t.parentId===e.id));a.forEach((t=>{t.depth=e.depth+1,s(t)})),e.children=a};return s(a),[a]})),Object(Ce.a)([ze],(e=>{if(e.length>0){const t=e.find((e=>"trash"===e.folderType));if(t)return t.id}return null}))),Ke=window.saveAs,Ye="er",Qe="relational",Ve="star";class $e extends i.Component{constructor(...e){super(...e),this.state={menuAnchor:null,diagramId:null,diagramType:null,isMoving:!1,selectedIds:[]},this.handleClick=e=>{const{mode:t,onSelectDiagram:a,history:s,currentFolderId:i,trashFolderId:n}=this.props;"select"===t?a(e):i!==n&&s.push(`/edit-diagram/${e}`)},this.handleMenuClick=(e,t,a)=>{this.setState({menuAnchor:e,diagramId:t,diagramType:a})},this.handleMenuClose=()=>{this.setState({menuAnchor:null,diagramId:null,diagramType:null})},this.handleOpen=()=>{this.handleClick(this.state.diagramId),this.handleMenuClose()},this.handleRename=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId));this.handleMenuClose(),this.props.renameDiagramDialogShow(e)},this.handleTrash=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId));this.props.saveDiagram({...e,folderId:this.props.trashFolderId}),this.handleMenuClose()},this.handleCopy=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId)),t={folderId:e.folderId,name:`${e.name} Copy`,diagramType:e.diagramType,content:e.content};this.props.createDiagram(t),this.handleMenuClose()},this.handleExport=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId)),t=new Blob([e.content],{type:"text/plain;charset=utf-8"});Ke(t,`${e.name}.erdplus`),this.handleMenuClose()},this.handleConvertToRelational=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId));this.handleMenuClose(),this.props.showConvertToRelationalDialog(e.id,e.name)},this.handleGenerateSql=()=>{const e=this.props.currentFolderDiagrams.find((e=>e.id===this.state.diagramId));this.handleMenuClose(),this.props.generateSql(e.content)},this.typeToName=e=>e===Ye?"ER Diagram":e===Qe?"Relational Schema":e===Ve?"Star Schema":""}render(){const{menuAnchor:e,diagramType:t}=this.state,{currentFolderDiagrams:a,classes:i,mode:n,selectedIds:o,currentFolderId:r,trashFolderId:l}=this.props;a.sort(((e,t)=>e.name.localeCompare(t.name)));const c=r===l;return Object(s.jsxs)(te.a,{className:i.root,children:[Object(s.jsxs)(Ie.a,{id:"diagram-menu",open:Boolean(e),anchorEl:e,onClose:this.handleMenuClose,children:[Object(s.jsx)(Ne.a,{onClick:this.handleOpen,children:"Open ..."}),Object(s.jsx)(Re.a,{}),Object(s.jsx)(Ne.a,{onClick:this.handleRename,children:"Rename ..."}),Object(s.jsx)(Ne.a,{onClick:this.handleTrash,children:"Move to Trash"}),Object(s.jsx)(Ne.a,{onClick:this.handleCopy,children:"Copy"}),Object(s.jsx)(Ne.a,{onClick:this.handleExport,children:"Export"}),Object(s.jsx)(Ne.a,{onClick:this.handleConvertToRelational,disabled:"er"!==t,children:"Convert to Relational Schema"}),Object(s.jsx)(Ne.a,{onClick:this.handleGenerateSql,disabled:"er"===t,children:"Generate SQL"})]}),a.map(((t,a)=>Object(s.jsxs)(ie.a,{button:!c,onClick:()=>this.handleClick(t.id),children:["select"===n&&Object(s.jsx)($.a,{checked:o.includes(t.id),tabIndex:a}),Object(s.jsx)(ne.a,{children:Object(s.jsx)(Ae.a,{})}),Object(s.jsx)(oe.a,{primary:t.name,secondary:this.typeToName(t.diagramType)}),Object(s.jsx)(oe.a,{secondary:window.moment(t.updatedAt).fromNow(),className:i.lastModified}),!c&&Object(s.jsx)(De.a,{children:Object(s.jsx)(_.a,{"aria-label":"diagram menu","aria-owns":e?"diagram-menu":null,"aria-haspopup":"true",onClick:e=>this.handleMenuClick(e.currentTarget,t.id,t.diagramType),children:Object(s.jsx)(Te.a,{})})})]},t.id)))]})}}var Je=Object(m.a)((e=>({root:{width:"100%",backgroundColor:e.palette.background.paper},lastModified:{textAlign:"right",marginRight:30}})))(Object(l.f)(Object(c.b)((e=>({currentFolderId:e.folder.currentFolderId,currentFolderDiagrams:Se(e),trashFolderId:He(e)})),(e=>({createDiagram:t=>e(_e.createDiagram(t)),deleteDiagram:t=>e(_e.deleteDiagram(t)),saveDiagram:t=>e(_e.saveDiagram(t)),renameDiagramDialogShow:t=>e(_e.renameDiagramDialogShow(t)),showConvertToRelationalDialog:(t,a)=>e(Ge.showConvertToRelationalDialog(t,a)),generateSql:t=>e(Ge.generateSql(t))})))($e))),Xe=a(363);const{Types:Ze,Creators:et}=Object(g.createActions)({getFolders:null,getFoldersSuccess:["folders"],getFoldersFailure:null,expandFolder:["folderId"],collapseFolder:["folderId"],createFolderDialogShow:null,createFolderDialogCancel:null,newFolderNameChanged:["newFolderName"],createFolder:["name","parentId"],createFolderSuccess:["folder"],createFolderFailure:null,selectFolder:["folderId"],editFolderDialogShow:["folderId","name"],editFolderDialogCancel:null,editFolderNameChanged:["name"],renameFolder:["folder"],renameFolderSuccess:["folder"],renameFolderFailure:null,deleteFolderDialogShow:["folderId"],deleteFolderDialogCancel:null,deleteFolder:["folderId"],deleteFolderSuccess:null,deleteFolderFailure:null,emptyTrashShow:null,emptyTrashCancel:null,emptyTrash:null,emptyTrashSuccess:null,emptyTrashFailure:null}),tt=Object(g.createReducer)({folders:[],foldersMeta:[],currentFolderId:null,showNewFolder:!1,newFolderName:"",showEditFolder:!1,editFolderNewName:"",editFolderId:null,showDeleteFolder:!1,deleteFolderName:"",deleteFolderId:null,showEmptyTrash:!1},{[Ze.GET_FOLDERS]:e=>e,[Ze.GET_FOLDERS_SUCCESS]:(e,t)=>{const a=t.folders.map((e=>({id:e.id,isOpen:"root"===e.folderType}))),s=t.folders.find((e=>"root"===e.folderType));return{...e,folders:t.folders,foldersMeta:a,currentFolderId:s?s.id:null}},[Ze.GET_FOLDERS_FAILURE]:e=>({...e,folders:[],foldersMeta:[]}),[Ze.EXPAND_FOLDER]:(e,t)=>{const a=e.foldersMeta.map((e=>e.id===t.folderId?{...e,isOpen:!0}:e));return{...e,foldersMeta:a}},[Ze.COLLAPSE_FOLDER]:(e,t)=>{const a=e.foldersMeta.map((e=>e.id===t.folderId?{...e,isOpen:!1}:e));return{...e,foldersMeta:a}},[Ze.CREATE_FOLDER_DIALOG_SHOW]:e=>({...e,showNewFolder:!0,newFolderName:""}),[Ze.CREATE_FOLDER_DIALOG_CANCEL]:e=>({...e,showNewFolder:!1}),[Ze.NEW_FOLDER_NAME_CHANGED]:(e,t)=>({...e,newFolderName:t.newFolderName}),[Ze.CREATE_FOLDER]:e=>e,[Ze.CREATE_FOLDER_SUCCESS]:(e,t)=>{const a=[...e.foldersMeta,{id:t.folder.id,isOpen:!1}],s=[...e.folders,t.folder];return{...e,showNewFolder:!1,folders:s,foldersMeta:a}},[Ze.CREATE_FOLDER_FAILURE]:e=>({...e,showNewFolder:!1}),[Ze.SELECT_FOLDER]:(e,t)=>({...e,currentFolderId:t.folderId}),[Ze.EDIT_FOLDER_DIALOG_SHOW]:(e,t)=>{const a=e.folders.find((e=>e.id===t.folderId));return{...e,showEditFolder:!0,editFolderNewName:a.name,editFolderId:t.folderId}},[Ze.EDIT_FOLDER_DIALOG_CANCEL]:e=>({...e,showEditFolder:!1}),[Ze.EDIT_FOLDER_NAME_CHANGED]:(e,t)=>({...e,editFolderNewName:t.name}),[Ze.RENAME_FOLDER]:e=>e,[Ze.RENAME_FOLDER_SUCCESS]:(e,t)=>{const a=[...e.folders.filter((e=>e.id!==t.folder.id)),t.folder];return{...e,showEditFolder:!1,folders:a}},[Ze.RENAME_FOLDER_FAILURE]:(e,t)=>({...e,showEditFolder:!1}),[Ze.DELETE_FOLDER_DIALOG_SHOW]:(e,t)=>{const a=e.folders.find((e=>e.id===t.folderId));return{...e,showDeleteFolder:!0,deleteFolderName:a.name,deleteFolderId:t.folderId}},[Ze.DELETE_FOLDER_DIALOG_CANCEL]:(e,t)=>({...e,showDeleteFolder:!1}),[Ze.DELETE_FOLDER]:e=>e,[Ze.DELETE_FOLDER_SUCCESS]:(e,t)=>({...e,showDeleteFolder:!1}),[Ze.DELETE_FOLDER_FAILURE]:(e,t)=>({...e,showDeleteFolder:!1}),[Ze.EMPTY_TRASH_SHOW]:e=>({...e,showEmptyTrash:!0}),[Ze.EMPTY_TRASH_CANCEL]:e=>({...e,showEmptyTrash:!1}),[Ze.EMPTY_TRASH]:e=>e,[Ze.EMPTY_TRASH_SUCCESS]:(e,t)=>({...e,showEmptyTrash:!1}),[Ze.EMPTY_TRASH_FAILURE]:(e,t)=>({...e,showEmptyTrash:!1})}),at=Ze;var st=et;const{Types:it,Creators:nt}=Object(g.createActions)({setContext:["contextDetails","contextType"],clearContext:null,setMouseMode:["mouseMode"],setUndoRedo:["canUndo","canRedo"],setCanDelete:["canDelete"],setCanvasSize:["width","height"],showCanvasSizeDialog:["minCanvasWidth","minCanvasHeight"],hideCanvasSizeDialog:null,showExportImageDialog:["diagramContent"],hideExportImageDialog:null,createExportImageData:["diagramContent","transparent","scale"],createExportImageDataSuccess:["dataUrl","blob"],updateExportImageOptions:["transparent","scale"],setIsDirty:["isDirty"],saveEditDiagram:["diagram"]}),ot=Object(g.createReducer)({contextDetails:{},contextType:"",mouseMode:"none",canUndo:!1,canRedo:!1,canDelete:!1,canvasWidth:2e3,canvasHeight:1e3,showCanvasSizeDialog:!1,minCanvasWidth:0,minCanvasHeight:0,showExportImageDialog:!1,exportImageContent:"",exportImageTransparent:!1,exportImageScale:1,exportImageDataUrl:"",exportImageBlob:null,isDirty:!1},{[it.SET_CONTEXT]:(e,t)=>({...e,contextDetails:t.contextDetails,contextType:t.contextType}),[it.CLEAR_CONTEXT]:e=>({...e,contextDetails:{},contextType:""}),[it.SET_MOUSE_MODE]:(e,t)=>({...e,mouseMode:t.mouseMode}),[it.SET_UNDO_REDO]:(e,t)=>({...e,canUndo:t.canUndo,canRedo:t.canRedo}),[it.SET_CAN_DELETE]:(e,t)=>({...e,canDelete:t.canDelete}),[it.SET_CANVAS_SIZE]:(e,t)=>({...e,canvasWidth:t.width,canvasHeight:t.height,showCanvasSizeDialog:!1}),[it.SHOW_CANVAS_SIZE_DIALOG]:(e,t)=>({...e,showCanvasSizeDialog:!0,minCanvasWidth:t.minCanvasWidth,minCanvasHeight:t.minCanvasHeight}),[it.HIDE_CANVAS_SIZE_DIALOG]:e=>({...e,showCanvasSizeDialog:!1}),[it.SHOW_EXPORT_IMAGE_DIALOG]:(e,t)=>({...e,showExportImageDialog:!0,exportImageContent:t.diagramContent}),[it.HIDE_EXPORT_IMAGE_DIALOG]:e=>({...e,showExportImageDialog:!1,exportImageDataUrl:"",exportImageBlob:null}),[it.CREATE_EXPORT_IMAGE_DATA]:e=>e,[it.CREATE_EXPORT_IMAGE_DATA_SUCCESS]:(e,t)=>({...e,exportImageDataUrl:t.dataUrl,exportImageBlob:t.blob}),[it.UPDATE_EXPORT_IMAGE_OPTIONS]:(e,t)=>({...e,exportImageTransparent:t.transparent,exportImageScale:t.scale}),[it.SET_IS_DIRTY]:(e,t)=>({...e,isDirty:t.isDirty}),[it.SAVE_EDIT_DIAGRAM]:e=>e}),rt=it;var lt=nt,ct=a(377),dt=a(361),ht=a(359),mt=a(360),pt=a(358),ut=a(378);class bt extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.emptyTrashCancel()},this.handleSubmit=()=>{this.props.emptyTrash()}}render(){const{showEmptyTrash:e,classes:t}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"confirm-empty-trash-dialog",onEscapeKeyDown:this.handleCancel,className:t.dialog,children:[Object(s.jsx)(pt.a,{id:"confirm-empty-trash-dialog",children:"Empty Trash"}),Object(s.jsx)(ht.a,{children:Object(s.jsx)(mt.a,{children:"Permanently delete all documents in the Trash folder?"})}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Empty Trash"})]})]})}}var jt=Object(m.a)((e=>({dialog:{},input:{width:300}})))(Object(c.b)((e=>({showEmptyTrash:e.folder.showEmptyTrash})),(e=>({emptyTrashCancel:()=>e(st.emptyTrashCancel()),emptyTrash:()=>e(st.emptyTrash())})))(Object(ut.a)()(bt)));class gt extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.createFolderDialogCancel()},this.handleSubmit=()=>{this.props.createFolder(this.props.newFolderName,this.props.currentFolderId)},this.newFolderNameChanged=e=>{this.props.newFolderNameChanged(e.target.value)}}render(){const{showNewFolder:e,newFolderName:t,classes:a}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"new-folder-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"new-folder-dialog",children:"Create New Folder"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Create a new folder."}),Object(s.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:t,onChange:this.newFolderNameChanged,className:a.input})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Create"})]})]})}}var xt=Object(m.a)((e=>({dialog:{},input:{width:300}})))(Object(c.b)((e=>({showNewFolder:e.folder.showNewFolder,newFolderName:e.folder.newFolderName,currentFolderId:e.folder.currentFolderId})),(e=>({createFolderDialogCancel:()=>e(st.createFolderDialogCancel()),createFolder:(t,a)=>e(st.createFolder(t,a)),newFolderNameChanged:t=>e(st.newFolderNameChanged(t))})))(Object(ut.a)()(gt)));class Ot extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.editFolderDialogCancel()},this.handleSubmit=()=>{const e={...this.props.editFolder,name:this.props.editFolderNewName};this.props.renameFolder(e)},this.editFolderNameChanged=e=>{this.props.editFolderNameChanged(e.target.value)}}render(){const{showEditFolder:e,editFolderNewName:t,classes:a}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"edit-folder-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"edit-folder-dialog",children:"Rename Folder"}),Object(s.jsx)(ht.a,{children:Object(s.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:t,onChange:this.editFolderNameChanged,className:a.input})}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Rename"})]})]})}}var yt=Object(m.a)((e=>({dialog:{},input:{width:300}})))(Object(c.b)((e=>({editFolder:e.folder.folders.find((t=>t.id===e.folder.editFolderId)),showEditFolder:e.folder.showEditFolder,editFolderNewName:e.folder.editFolderNewName,editFolderId:e.folder.editFolderId})),(e=>({editFolderDialogCancel:()=>e(st.editFolderDialogCancel()),renameFolder:t=>e(st.renameFolder(t)),editFolderNameChanged:t=>e(st.editFolderNameChanged(t))})))(Object(ut.a)()(Ot))),Ct=a(375),ft=a(362),St=a(347),wt=a(301);const Dt="er",vt="relational",At="star";class Et extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.createDiagramDialogCancel()},this.handleSubmit=()=>{const{currentFolderId:e,createDiagramName:t,createDiagramType:a}=this.props,s={folderId:e,name:t,diagramType:a,content:JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3})};this.props.createDiagram(s)},this.handleNameChanged=e=>{this.props.setCreateDiagramName(e.target.value)},this.handleTypeChange=e=>{this.props.setCreateDiagramType(e.target.value)}}render(){const{createDiagramName:e,createDiagramType:t,showCreateDiagramDialog:a,classes:i}=this.props;return Object(s.jsxs)(ct.a,{open:a,"aria-labelledby":"new-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:i.dialog,children:[Object(s.jsx)(pt.a,{id:"new-diagram-dialog",children:"Create New Diagram"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Create a new diagram."}),Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:e,onChange:this.handleNameChanged,className:i.input})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",children:[Object(s.jsx)(wt.a,{children:"Type"}),Object(s.jsxs)(ft.a,{value:t,onChange:this.handleTypeChange,children:[Object(s.jsx)(V.a,{value:Dt,control:Object(s.jsx)(Ct.a,{}),label:"ER Diagram"}),Object(s.jsx)(V.a,{value:vt,control:Object(s.jsx)(Ct.a,{}),label:"Relational Schema"}),Object(s.jsx)(V.a,{value:At,control:Object(s.jsx)(Ct.a,{}),label:"Star Schema"})]})]})})]})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Create"})]})]})}}var Tt=Object(m.a)((e=>({dialog:{},input:{width:500}})))(Object(c.b)((e=>({createDiagramName:e.diagram.createDiagramName,createDiagramType:e.diagram.createDiagramType,showCreateDiagramDialog:e.diagram.showCreateDiagramDialog,currentFolderId:e.folder.currentFolderId})),(e=>({createDiagramDialogCancel:()=>e(_e.createDiagramDialogCancel()),createDiagram:t=>e(_e.createDiagram(t)),setCreateDiagramName:t=>e(_e.setCreateDiagramName(t)),setCreateDiagramType:t=>e(_e.setCreateDiagramType(t))})))(Object(ut.a)()(Et)));class It extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.deleteFolderDialogCancel()},this.handleSubmit=()=>{this.props.deleteFolder(this.props.deleteFolderId)}}render(){const{showDeleteFolder:e,deleteFolderName:t,classes:a}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"delete-folder-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"delete-folder-dialog",children:"Delete Folder"}),Object(s.jsx)(ht.a,{children:Object(s.jsxs)(mt.a,{children:['Delete the folder named "',t,'" and all subfolders?',Object(s.jsxs)("p",{children:["Diagrams in the deleted folders will be deleted and ",Object(s.jsx)("br",{}),"moved to the Trash folder."]})]})}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Delete"})]})]})}}var Nt=Object(m.a)((e=>({dialog:{}})))(Object(c.b)((e=>({showDeleteFolder:e.folder.showDeleteFolder,deleteFolderName:e.folder.deleteFolderName,deleteFolderId:e.folder.deleteFolderId})),(e=>({deleteFolderDialogCancel:()=>e(st.deleteFolderDialogCancel()),deleteFolder:t=>e(st.deleteFolder(t))})))(Object(ut.a)()(It)));class Rt extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.renameDiagramDialogCancel()},this.handleSubmit=()=>{const{diagram:e,renameDiagramName:t,renameDiagramDialogCancel:a,saveDiagram:s}=this.props,i={...e,name:t};a(),s(i)},this.handleNameChanged=e=>{const t=e.target.value;this.props.renameDiagramNameChanged(t)}}render(){const{showRenameDiagramDialog:e,renameDiagramName:t,classes:a}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"rename-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"rename-diagram-dialog",children:"Rename New Diagram"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Rename a new diagram."}),Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:e=>{}},value:t,onChange:this.handleNameChanged,className:a.input})})})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Rename"})]})]})}}var Mt=Object(m.a)((e=>({dialog:{},input:{width:500}})))(Object(c.b)((e=>{const t=e.diagram.renameDiagramId,a=e.diagram.diagrams.find((e=>e.id===t));return{showRenameDiagramDialog:e.diagram.showRenameDiagramDialog,renameDiagramName:e.diagram.renameDiagramName,renameDiagramId:t,diagram:a}}),(e=>({renameDiagramDialogCancel:()=>e(_e.renameDiagramDialogCancel()),renameDiagramNameChanged:t=>e(_e.renameDiagramNameChanged(t)),saveDiagram:t=>e(_e.saveDiagram(t))})))(Object(ut.a)()(Rt))),kt=a(191),Ft=a(179),Pt=a.n(Ft),_t=a(180),Lt=a.n(_t),Bt=a(181),qt=a.n(Bt),Ut=a(384),Gt=a(383);class zt extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.importDiagramDialogCancel()},this.handleSubmit=()=>{const{dropImportFileResults:e,importDiagrams:t}=this.props;t(e.filter((e=>e.ok)).map((e=>e.diagram)))},this.handleOnDrop=e=>{const{dropImportFile:t,currentFolderId:a}=this.props;e.forEach((e=>{t(e,a)}))},this.handleDeleteChip=e=>{this.props.removeImportFile(e)}}render(){const{showImportDiagramDialog:e,dropImportFileResults:t,standalone:a,classes:i}=this.props,n=t.length>0,o=a?"Import New Diagram":"Import New Diagrams",r=a?"Drag and drop file here or click to browse for a file":"Drag and drop multiple files here or click to browse for a file";return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"import-diagram-dialog",onEscapeKeyDown:this.handleCancel,children:[Object(s.jsx)(pt.a,{id:"import-diagram-dialog",children:o}),Object(s.jsx)(ht.a,{children:Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(kt.a,{onDrop:this.handleOnDrop,className:i.dropzone,multiple:!a,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{align:"center",variant:"body2",children:r})}),Object(s.jsx)(q.a,{item:!0,xs:12,align:"center",children:Object(s.jsx)(Pt.a,{})}),Object(s.jsx)(q.a,{item:!0,xs:12,align:"center",children:t.map(((e,t)=>{const a=e.ok?Object(s.jsx)(Gt.a,{children:Object(s.jsx)(Lt.a,{})}):Object(s.jsx)(Gt.a,{children:Object(s.jsx)(qt.a,{})});return Object(s.jsx)(Ut.a,{label:e.name,className:i.chip,onDelete:()=>this.handleDeleteChip(t),avatar:a},t)}))})]})})})})}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",disabled:!n,children:"Import"})]})]})}}var Wt=Object(m.a)((e=>({dropzone:{height:250,width:500,borderWidth:2,borderColor:"#999999",borderStyle:"dashed",borderRadius:5},list:{maxHeight:200,overflowY:"auto"},chip:{margin:5}})))(Object(c.b)((e=>({showImportDiagramDialog:e.diagram.showImportDiagramDialog,dropImportFileResults:e.diagram.dropImportFileResults,currentFolderId:e.folder.currentFolderId})),(e=>({importDiagramDialogCancel:()=>e(_e.importDiagramDialogCancel()),dropImportFile:(t,a)=>e(_e.dropImportFile(t,a)),removeImportFile:t=>e(_e.removeImportFile(t))})))(Object(ut.a)()(zt)));class Ht extends n.a.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.hideConvertToRelationalDialog()},this.handleCreate=()=>{const{diagram:e,name:t,convertToRelational:a,history:s}=this.props;a(e.folderId,t,e.content,!1,s)},this.handleEdit=()=>{const{diagram:e,name:t,convertToRelational:a,history:s}=this.props;a(e.folderId,t,e.content,!0,s)},this.handleNameChanged=e=>{const t=e.target.value;this.props.nameChanged(t)}}render(){const{showDialog:e,name:t,classes:a,autoFocusName:i}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"convert-diagram-dialog",children:"Convert to Relational Schema"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"The relational diagram will be created in the same folder as this ER diagram."}),Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:e=>{e&&i&&setTimeout((()=>{e.focus(),e.select()}),0)}},value:t,onChange:this.handleNameChanged,className:a.input})})})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleCreate,color:"primary",children:"Create"}),Object(s.jsx)(p.a,{onClick:this.handleEdit,color:"primary",children:"Create & Edit"})]})]})}}var Kt=Object(m.a)((e=>({dialog:{},input:{width:500}})))(Object(l.f)(Object(c.b)((e=>{const t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find((e=>e.id===t)),showDialog:e.convert.showDialog,autoFocusName:e.convert.autoFocusName,name:e.convert.name}}),(e=>({hideConvertToRelationalDialog:()=>e(Ge.hideConvertToRelationalDialog()),nameChanged:t=>e(Ge.nameChanged(t)),convertToRelational:(t,a,s,i,n)=>e(Ge.convertToRelational(t,a,s,i,n))})))(Object(ut.a)()(Ht)))),Yt=a(182);class Qt extends n.a.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.hideConvertSqlDialog()},this.handleCopy=()=>{this.props.setSqlCopied()}}render(){const{showConvertSqlDialog:e,sql:t,sqlCopied:a,classes:i}=this.props,n=a?"Generate SQL - Copied":"Generate SQL";return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:i.dialog,children:[Object(s.jsx)(pt.a,{id:"convert-diagram-dialog",children:n}),Object(s.jsx)(ht.a,{children:Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("pre",{align:"left",variant:"body2",children:t})})})}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Close (ESC)"}),Object(s.jsx)(Yt.CopyToClipboard,{text:t,onCopy:this.handleCopy,children:Object(s.jsx)(p.a,{color:"primary",children:"Copy"})})]})]})}}var Vt=Object(m.a)((e=>({dialog:{},sql:{width:500,height:300}})))(Object(c.b)((e=>{const t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find((e=>e.id===t)),sql:e.convert.sql,showConvertSqlDialog:e.convert.showConvertSqlDialog,sqlCopied:e.convert.sqlCopied}}),(e=>({hideConvertSqlDialog:()=>e(Ge.hideConvertSqlDialog()),setSqlCopied:()=>e(Ge.setSqlCopied())})))(Object(ut.a)()(Qt)));class $t extends n.a.Component{constructor(...e){super(...e),this.state={foldersMeta:[],currendFolderId:0},this.handleSubmit=()=>{this.props.onSubmit(this.state.currendFolderId),this.props.moveToFolderDialogCancel()},this.handleCancel=()=>{this.props.moveToFolderDialogCancel()},this.expandFolder=e=>{const t=this.state.foldersMeta.map((t=>t.id===e?{...t,isOpen:!0}:t));this.setState({foldersMeta:t})},this.collapseFolder=e=>{const t=this.state.foldersMeta.map((t=>t.id===e?{...t,isOpen:!1}:t));this.setState({foldersMeta:t})},this.selectFolder=e=>{this.setState({currendFolderId:e})},this.makeFolderTree=(e,t,a)=>{if(0===e.length)return[];const s=e.map((e=>({...t.find((t=>t.id===e.id)),...e,isSelected:e.id===a}))),i=s.find((e=>"root"===e.folderType)),n=s.find((e=>"trash"===e.folderType));i.depth=0,n.depth=0,n.children=[];const o=e=>{const t=s.filter((t=>t.parentId===e.id));t.forEach((t=>{t.depth=e.depth+1,o(t)})),e.children=t};return o(i),[i,n]}}componentDidUpdate(e,t,a){if(!1===e.showMoveToFolderDialog&&!0===this.props.showMoveToFolderDialog){const e=this.props.folders.map((e=>({id:e.id,isOpen:"root"===e.folderType})));this.setState({foldersMeta:e,currendFolderId:0})}}render(){const{foldersMeta:e,currendFolderId:t}=this.state,{classes:a,folders:i,showMoveToFolderDialog:n}=this.props,o=this.makeFolderTree(i,e,t);return Object(s.jsxs)(ct.a,{open:n,"aria-labelledby":"move-to-folder-dialog",onEscapeKeyDown:this.handleCancel,children:[Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Select a folder"}),Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:12,className:a.folderTree,children:Object(s.jsx)(ye,{folderTree:o,expandFolder:this.expandFolder,collapseFolder:this.collapseFolder,selectFolder:this.selectFolder})})})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",disabled:0===t,children:"Move"})]})]})}}var Jt=Object(m.a)((e=>({dialog:{},folderTree:{width:420,height:280,overflowY:"scroll",overflowX:"hidden",border:"1px solid #efefef"}})))(Object(l.f)(Object(c.b)((e=>({folders:e.folder.folders,showMoveToFolderDialog:e.diagram.showMoveToFolderDialog})),(e=>({moveToFolderDialogCancel:()=>e(_e.moveToFolderDialogCancel())})))(Object(ut.a)()($t))));const Xt=e=>{const{id:t}=e;return Object(s.jsx)("h4",{id:"adText-"+t,style:{display:"table",textAlign:"left",color:"lightgray",position:"relative",marginTop:"8px",marginBottom:"4px"},children:"Advertisement"})},Zt=e=>{const{id:t,dataAdSlot:a,height:n,width:o}=e,r=!n&&!o;return Object(i.useEffect)((()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){}}),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("ins",{id:"ad-"+t,className:"adsbygoogle",style:{display:"flex",alignItems:"center",flexDirection:"column",width:o,height:n},"data-ad-client":"ca-pub-9122012703187454","data-ad-slot":a,"data-ad-format":r?"auto":void 0,"data-full-width-responsive":r?"true":void 0})})};var ea=e=>{const{dataAdSlot:t,width:a,height:n,className:o}=e,r=crypto.randomUUID();return Object(i.useEffect)((()=>{const e=document.getElementById("ad-"+r),t=document.getElementById("adText-"+r);e.style.height||(t.style.display="none")}),[]),Object(s.jsxs)("div",{className:o,children:[Object(s.jsx)(Xt,{id:r}),Object(s.jsx)(Zt,{id:r,dataAdSlot:t,width:a,height:n})]})};const ta=400;class aa extends i.Component{constructor(...e){super(...e),this.state={anchorEl:null,selectedIds:[]},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.handleNewFolderClick=()=>{this.props.createFolderDialogShow()},this.handleRenameFolderClick=()=>{this.props.editFolderDialogShow(this.props.currentFolderId)},this.handleDeleteFolderClick=()=>{this.props.deleteFolderDialogShow(this.props.currentFolderId)},this.handleNewDiagramClick=()=>{this.props.createDiagramDialogShow()},this.handleImportDiagram=()=>{this.props.importDiagramDialogShow()},this.handleOrganizeDiagram=()=>{this.props.setDocumentsPageMode("select"),this.setState({selectedIds:[]})},this.handleMoveDone=()=>{this.props.setDocumentsPageMode("list")},this.handleMoveTo=()=>{this.props.moveToFolderDialogShow()},this.handleSelectDiagram=e=>{let t=[...this.state.selectedIds];const a=t.indexOf(e);-1===a?t.push(e):t.splice(a,1),this.setState({selectedIds:t})},this.handleMoveToFolderSubmit=e=>{const t=this.state.selectedIds,a=this.props.diagrams.filter((e=>-1!==t.indexOf(e.id))).map((t=>({...t,folderId:e})));this.props.saveManyDiagrams(a)},this.selectFolder=e=>{this.handleMoveDone(),this.props.selectFolder(e)},this.handleEmptyTrash=()=>{this.props.emptyTrashShow()}}componentDidMount(){window.gtag("event","page_view",{page_path:"/documents"})}render(){const{classes:e,folderTree:t,expandFolder:a,collapseFolder:i,documentsPageMode:n,currentFolderType:o}=this.props,{selectedIds:r}=this.state,l="trash"!==o&&"root"!==o,c="trash"===o;return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)("div",{className:e.contentArea,children:[Object(s.jsx)(jt,{}),Object(s.jsx)(xt,{}),Object(s.jsx)(yt,{}),Object(s.jsx)(Tt,{}),Object(s.jsx)(Mt,{}),Object(s.jsx)(Nt,{}),Object(s.jsx)(Wt,{importDiagrams:this.props.importDiagrams,standalone:!1}),Object(s.jsx)(Kt,{}),Object(s.jsx)(Vt,{}),Object(s.jsx)(Jt,{onSubmit:this.handleMoveToFolderSubmit}),Object(s.jsx)("div",{className:e.folderButtonsArea,children:Object(s.jsx)(q.a,{container:!0,spacing:1,className:e.grid,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("div",{className:e.buttonContainer,children:Object(s.jsxs)(Xe.a,{children:[Object(s.jsx)(p.a,{className:e.button,onClick:this.handleNewFolderClick,children:"New Folder..."}),Object(s.jsx)(p.a,{className:e.button,onClick:this.handleRenameFolderClick,disabled:!l,children:"Rename..."}),Object(s.jsx)(p.a,{className:e.button,onClick:this.handleDeleteFolderClick,disabled:!l,children:"Delete..."})]})})})})}),Object(s.jsx)("div",{className:e.folderArea,children:Object(s.jsx)(q.a,{container:!0,spacing:1,className:e.grid,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(ye,{folderTree:t,expandFolder:a,collapseFolder:i,selectFolder:this.selectFolder})})})}),Object(s.jsx)("div",{className:e.documentButtonsArea,children:Object(s.jsx)(q.a,{container:!0,spacing:1,className:e.grid,children:Object(s.jsxs)(q.a,{item:!0,xs:12,children:["list"===n&&Object(s.jsx)("div",{className:e.buttonContainer,children:Object(s.jsxs)(Xe.a,{children:[Object(s.jsx)(p.a,{className:e.button,onClick:this.handleNewDiagramClick,disabled:c,children:"New Diagram..."}),Object(s.jsx)(p.a,{className:e.button,onClick:this.handleImportDiagram,disabled:c,children:"Import..."}),Object(s.jsx)(p.a,{className:e.button,onClick:this.handleOrganizeDiagram,children:"Organize..."}),c&&Object(s.jsx)(p.a,{className:e.button,onClick:this.handleEmptyTrash,children:"Empty Trash..."})]})}),"select"===n&&Object(s.jsxs)("div",{className:e.buttonContainer,children:[Object(s.jsxs)(Xe.a,{children:[Object(s.jsx)(p.a,{variant:"outlined",className:e.button,onClick:this.handleMoveDone,children:"Back"}),Object(s.jsx)(p.a,{variant:"outlined",className:e.button,onClick:this.handleMoveTo,disabled:0===r.length,children:"Move..."})]}),Object(s.jsx)(G.a,{className:e.helperText,variant:"body1",children:"Select diagrams to move to another folder or to Trash."})]})]})})}),Object(s.jsxs)("div",{className:e.documentsArea,style:{display:"flex",flexDirection:"column"},children:[Object(s.jsx)(q.a,{container:!0,spacing:1,className:e.grid,style:{flexGrow:1,overflow:"scroll"},children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(Je,{mode:n,selectedIds:r,onSelectDiagram:this.handleSelectDiagram})})}),Object(s.jsx)(ea,{dataAdSlot:"9447069709",height:"90px",width:"728px"})]})]})]})}}var sa=Object(m.a)((e=>({root:{flexGrow:1},grid:{},button:{},buttonIcon:{marginRight:12},helperText:{display:"inline-flex",marginLeft:10},buttonContainer:{},section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#eeeeee"},contentArea:{height:"100%"},folderButtonsArea:{position:"fixed",top:75,left:5,width:ta,height:40},folderArea:{position:"fixed",top:120,left:5,width:ta,bottom:5,backgroundColor:"white",overflowY:"auto",overflowX:"hidden",border:"1px solid #e0e0e0"},documentButtonsArea:{position:"fixed",top:75,left:410,right:5,height:40},documentsArea:{position:"fixed",top:120,left:410,right:5,bottom:5,backgroundColor:"white",overflowY:"audo",overflowX:"hidden",border:"1px solid #e0e0e0"}})))(Object(c.b)((e=>{const t=e.folder.folders.find((t=>t.id===e.folder.currentFolderId)),a=t?t.folderType:"";return{folderTree:We(e),diagrams:e.diagram.diagrams,documentsPageMode:e.diagram.documentsPageMode,currentFolderId:e.folder.currentFolderId,currentFolderType:a}}),(e=>({createFolderDialogShow:()=>e(st.createFolderDialogShow()),editFolderDialogShow:t=>e(st.editFolderDialogShow(t)),deleteFolderDialogShow:t=>e(st.deleteFolderDialogShow(t)),expandFolder:t=>e(st.expandFolder(t)),collapseFolder:t=>e(st.collapseFolder(t)),selectFolder:t=>e(st.selectFolder(t)),createDiagramDialogShow:()=>e(_e.createDiagramDialogShow()),importDiagramDialogShow:()=>e(_e.importDiagramDialogShow()),setCanvasSize:(t,a)=>e(lt.setCanvasSize(t,a)),moveToFolderDialogShow:()=>e(_e.moveToFolderDialogShow()),saveManyDiagrams:t=>e(_e.saveManyDiagrams(t)),setDocumentsPageMode:t=>e(_e.setDocumentsPageMode(t)),importDiagrams:t=>e(_e.importDiagrams(t)),emptyTrashShow:()=>e(st.emptyTrashShow())})))(aa)),ia=a(106),na=a.n(ia),oa=a(107),ra=a.n(oa),la=a(108),ca=a.n(la),da=a(105),ha=a.n(da),ma=a(183),pa=a.n(ma);const ua=window.erd,ba={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]};class ja extends i.Component{constructor(...e){super(...e),this.state={menuAnchor:null},this.handleUndo=()=>{const e=this.props.getStage();this.props.clearContext(),e.undoManager.undo()},this.handleRedo=()=>{const e=this.props.getStage();this.props.clearContext(),e.undoManager.redo()},this.handleDelete=()=>{const e=this.props.getStage();e.deleteSelection(),this.props.clearContext(),e.draw()},this.changeMode=e=>{const t=this.props.getStage(),{setMouseMode:a}=this.props;t.undoManager.hasCurrentAction()&&t.undoManager.endAction(),t.mouseMode=e,a(e)},this.handleMenuClick=e=>{this.setState({menuAnchor:e})},this.handleMenuClose=()=>{this.setState({menuAnchor:null})},this.handleExportImage=()=>{const{showExportImageDialog:e,createExportImageData:t,exportImageTransparent:a,exportImageScale:s}=this.props,i=this.props.getStage(),n=new ua.DiagramArchive(i).toJson();e(n),t(n,a,s),this.handleMenuClose()},this.handleResize=()=>{const e=this.props.getStage().getBounds(!1);this.props.showCanvasSizeDialog(e.right,e.bottom),this.setState({menuAnchor:null})}}render(){const{menuAnchor:e}=this.state,{classes:t,diagramType:a,mouseMode:i,canUndo:n,canRedo:o,canDelete:r,isDirty:l}=this.props,c=ba[a];return Object(s.jsxs)("div",{className:t.buttonBar,children:[Object(s.jsxs)(Ie.a,{id:"diagram-menu",open:Boolean(e),anchorEl:e,onClose:this.handleMenuClose,children:[Object(s.jsx)(Ne.a,{onClick:this.handleExportImage,children:"Export Image ..."}),Object(s.jsx)(Ne.a,{onClick:this.handleRename,children:"Rename ..."}),Object(s.jsx)(Ne.a,{onClick:this.handleResize,children:"Canvas Size ..."})]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:e=>this.handleMenuClick(e.currentTarget),children:[Object(s.jsx)(ha.a,{})," Menu"]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.props.handleSave,disabled:!l,children:[Object(s.jsx)(pa.a,{})," Save"]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleUndo,disabled:!n,children:[Object(s.jsx)(na.a,{})," Undo"]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleRedo,disabled:!o,children:[Object(s.jsx)(ra.a,{})," Redo"]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleDelete,disabled:!r,children:[Object(s.jsx)(ca.a,{})," Delete"]}),c.map((e=>Object(s.jsx)(p.a,{variant:"outlined",className:t.button,color:e.mouseMode===i?"primary":"default",onClick:()=>this.changeMode(e.mouseMode),children:e.name},e.mouseMode)))]})}}var ga=Object(m.a)((e=>({button:{marginTop:e.spacing(1),marginBottom:0,marginLeft:e.spacing(1),marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}})))(Object(l.f)(Object(c.b)(((e,t)=>({mouseMode:e.edit.mouseMode,editDiagram:we(e,t),canUndo:e.edit.canUndo,canRedo:e.edit.canRedo,canDelete:e.edit.canDelete,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale,isDirty:e.edit.isDirty})),(e=>({clearContext:()=>e(lt.clearContext()),setMouseMode:t=>e(lt.setMouseMode(t)),showCanvasSizeDialog:(t,a)=>e(lt.showCanvasSizeDialog(t,a)),showExportImageDialog:t=>e(lt.showExportImageDialog(t)),createExportImageData:(t,a,s)=>e(lt.createExportImageData(t,a,s))})))(ja)));class xa extends i.Component{constructor(...e){super(...e),this.state={width:this.props.canvasWidth,height:this.props.canvasHeight},this.handleCancel=()=>{this.props.hideCanvasSizeDialog()},this.handleSubmit=()=>{const{width:e,height:t}=this.state;this.props.setCanvasSize(e,t)},this.handleWidthChange=e=>{this.setState({width:e.target.value})},this.handleHeightChange=e=>{this.setState({height:e.target.value})}}render(){const{showCanvasSizeDialog:e,classes:t}=this.props,a=Math.max(this.props.minCanvasWidth,200),i=parseInt(this.state.width,10);let n=!0,o=" ";isNaN(i)?n=!1:i<a?(n=!1,o=`Must be at least ${a}`):i>12e3&&(n=!1,o="Must be less than 12000");const r=Math.max(this.props.minCanvasHeight,200),l=parseInt(this.state.height,10);let c=!0,d=" ";return isNaN(l)?c=!1:l<r?(c=!1,d=`Must be at least ${r}`):l>12e3&&(c=!1,d="Must be less than 12000"),Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:t.dialog,children:[Object(s.jsx)(pt.a,{id:"canvas-size-dialog",children:"Canvas Size"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Canvas Size."}),Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(U.a,{id:"width",label:"Width",margin:"normal",autoComplete:"off",helperText:o,error:!n,value:this.state.width,onChange:this.handleWidthChange})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(U.a,{id:"height",label:"Height",margin:"normal",autoComplete:"off",helperText:d,error:!c,value:this.state.height,onChange:this.handleHeightChange})})]})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",disabled:!(n&&c),children:"Save"})]})]})}}var Oa=Object(m.a)((e=>({dialog:{},input:{width:500}})))(Object(c.b)((e=>({canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,minCanvasWidth:e.edit.minCanvasWidth,minCanvasHeight:e.edit.minCanvasHeight,showCanvasSizeDialog:e.edit.showCanvasSizeDialog})),(e=>({createDiagramDialogCancel:()=>e(_e.createDiagramDialogCancel()),createDiagram:t=>e(_e.createDiagram(t)),setCanvasSize:(t,a)=>e(lt.setCanvasSize(t,a)),hideCanvasSizeDialog:()=>e(lt.hideCanvasSizeDialog())})))(Object(ut.a)()(xa)));const ya=window.saveAs;class Ca extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.hideExportImageDialog()},this.handleSubmit=()=>{ya(this.props.exportImageBlob,"image.png");this.props.hideExportImageDialog()},this.handleChangeTransparent=()=>{const{updateExportImageOptions:e,createExportImageData:t,exportImageContent:a,exportImageTransparent:s,exportImageScale:i}=this.props;e(!s,i),t(a,!s,i)},this.handleChangeScale=()=>{const{updateExportImageOptions:e,createExportImageData:t,exportImageContent:a,exportImageTransparent:s,exportImageScale:i}=this.props,n=1===i?4:1;e(s,n),t(a,s,n)}}render(){const{showExportImageDialog:e,exportImageDataUrl:t,exportImageTransparent:a,exportImageScale:i,classes:n}=this.props;return Object(s.jsxs)(ct.a,{open:e,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:n.dialog,children:[Object(s.jsx)(pt.a,{id:"canvas-size-dialog",children:"Export Image"}),Object(s.jsxs)(ht.a,{children:[Object(s.jsx)(mt.a,{children:"Preview"}),Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("div",{className:n.imageContainer,children:Object(s.jsx)("img",{src:t,alt:"diagram",className:n.image})})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(V.a,{control:Object(s.jsx)($.a,{checked:a,onChange:this.handleChangeTransparent}),label:"Transparent Background"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(V.a,{control:Object(s.jsx)($.a,{checked:4===i,onChange:this.handleChangeScale}),label:"High Resolution (4x normal size)"})})]})]}),Object(s.jsxs)(dt.a,{children:[Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(s.jsx)(p.a,{onClick:this.handleSubmit,color:"primary",children:"Save"})]})]})}}var fa=Object(m.a)((e=>({dialog:{},input:{width:500},canvas:{display:"none"},imageContainer:{width:500,height:250,overflow:"scroll",backgroundColor:"#eee",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px",backgroundImage:"linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0),linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0)"},image:{}})))(Object(c.b)((e=>({showExportImageDialog:e.edit.showExportImageDialog,exportImageDataUrl:e.edit.exportImageDataUrl,exportImageBlob:e.edit.exportImageBlob,exportImageContent:e.edit.exportImageContent,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale})),(e=>({hideExportImageDialog:()=>e(lt.hideExportImageDialog()),createExportImageData:(t,a,s)=>e(lt.createExportImageData(t,a,s)),updateExportImageOptions:(t,a)=>e(lt.updateExportImageOptions(t,a))})))(Object(ut.a)()(Ca)));const Sa=window.erd;class wa extends i.Component{constructor(...e){super(...e),this.state={...this.props.contextDetails,disjointed:this.props.contextDetails.isDisjointed?"d":"o"},this.handleNameChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.name=t,a.draw(),this.setState({name:t})},this.handleTypeChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.type=t,a.draw(),this.setState({type:t})},this.handleIsDisjointedChange=e=>{const t="d"===e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.isDisjointed=t,a.draw(),this.setState({disjointed:t?"d":"o"})},this.handleTotalSpecializationChange=()=>{const e=!this.state.isTotalSpecialization,t=this.props.getStage();t.undoManager.startAction();t.findById(this.props.contextDetails.id).details.isTotalSpecialization=e,t.draw(),this.setState({isTotalSpecialization:e})},this.handleAddAttribute=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()},this.handleAddSubtype=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id),a=t.getNextAutomaticSubtypePosition(),s=e.factory.entity({x:a.x,y:a.y,name:"Subtype Entity",isSubtype:!0,supertypeEntityId:t.details.id});e.addItem(s),e.connect.items(s,t,{isSupertypeConnector:!0}),e.selectItem(s),e.draw(),e.invokeDirtyCallback()}}componentDidMount(){const e=this.nameTextField;setTimeout((()=>{e.focus(),e.select()}),0)}render(){const{classes:e}=this.props;return Object(s.jsxs)(q.a,{container:!0,spacing:0,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:e.formControl,children:[Object(s.jsx)(wt.a,{children:"Entity Name"}),Object(s.jsx)(U.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:e=>this.nameTextField=e},className:e.textField})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:e.formControl,children:[Object(s.jsx)(wt.a,{children:"Type"}),Object(s.jsxs)(ft.a,{value:this.state.type,onChange:this.handleTypeChange,children:[Object(s.jsx)(V.a,{value:Sa.EntityType.Regular,control:Object(s.jsx)(Ct.a,{}),label:"Regular"}),Object(s.jsx)(V.a,{value:Sa.EntityType.Weak,control:Object(s.jsx)(Ct.a,{}),label:"Weak",disabled:this.state.isSubtype}),Object(s.jsx)(V.a,{value:Sa.EntityType.Associative,control:Object(s.jsx)(Ct.a,{}),label:"Associative",disabled:this.state.isSubtype}),Object(s.jsx)(V.a,{value:Sa.EntityType.Supertype,control:Object(s.jsx)(Ct.a,{}),label:"Supertype"})]})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddAttribute,children:"Add Attribute"})}),this.state.type===Sa.EntityType.Supertype&&Object(s.jsxs)(q.a,{children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:e.formControl,children:[Object(s.jsx)(wt.a,{children:"Supertype"}),Object(s.jsxs)(ft.a,{value:this.state.disjointed,onChange:this.handleIsDisjointedChange,children:[Object(s.jsx)(V.a,{value:"d",control:Object(s.jsx)(Ct.a,{}),label:"Disjointed"}),Object(s.jsx)(V.a,{value:"o",control:Object(s.jsx)(Ct.a,{}),label:"Overlapping"})]})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(V.a,{label:"Total Specialization",control:Object(s.jsx)($.a,{checked:this.state.isTotalSpecialization,onChange:this.handleTotalSpecializationChange})})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddSubtype,children:"Add Subtype Entity"})})]})]})}}var Da=Object(m.a)((e=>({formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}})))(Object(c.b)((e=>({})),(e=>({})))(wa)),va=a(303);class Aa extends i.Component{constructor(...e){super(...e),this.state={...this.props.contextDetails},this.handleNameChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.name=t,a.draw(),this.setState({name:t})},this.handleFlagChange=e=>t=>{const a=this.props.getStage(),s=a.findById(this.props.contextDetails.id);a.undoManager.startAction(),"isComposite"===e&&s.removeAllChildAttributes(a);const i=!s.details[e];s.details[e]=i,a.draw(),this.setState({[e]:i})},this.handleAddAttributeToEntity=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id).getOwner(),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()},this.handleAddComponentAttribute=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()},this.handleAddAttributeToComposite=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id).getOwner(),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()},this.handleAddAttributeToRelationship=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id).getOwner(),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()}}componentDidMount(){const e=this.nameTextField;setTimeout((()=>{e.focus(),e.select()}),0)}render(){const e=this.props.getStage().findById(this.props.contextDetails.id).getOwner(),t=e&&"Entity"===e.getType(),a=e&&"Relationship"===e.getType(),i=this.state.isComposite,n=e&&"Attribute"===e.getType()&&e.details.isComposite,o=t&&"weak"===e.details.type,{classes:r}=this.props;return Object(s.jsxs)(q.a,{container:!0,spacing:0,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:r.formControl,children:[Object(s.jsx)(wt.a,{children:"Attribute Name"}),Object(s.jsx)(U.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:e=>this.nameTextField=e},className:r.textField})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(St.a,{component:"fieldset",className:r.formControl,children:Object(s.jsxs)(va.a,{children:[Object(s.jsx)(V.a,{label:o?"Partially Unique":"Unique",control:Object(s.jsx)($.a,{checked:this.state.isUnique,onChange:this.handleFlagChange("isUnique")})}),Object(s.jsx)(V.a,{label:"Multivalued",control:Object(s.jsx)($.a,{checked:this.state.isMultivalued,onChange:this.handleFlagChange("isMultivalued")})}),Object(s.jsx)(V.a,{label:"Optional",control:Object(s.jsx)($.a,{checked:this.state.isOptional,onChange:this.handleFlagChange("isOptional")})}),Object(s.jsx)(V.a,{label:"Composite",control:Object(s.jsx)($.a,{checked:this.state.isComposite,onChange:this.handleFlagChange("isComposite")})}),Object(s.jsx)(V.a,{label:"Derived",control:Object(s.jsx)($.a,{checked:this.state.isDerived,onChange:this.handleFlagChange("isDerived")})})]})})}),t&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddAttributeToEntity,children:"Add Attribute to Entity"})}),a&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddAttributeToRelationship,children:"Add Attribute to Relationship"})}),i&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddComponentAttribute,children:"Add Component Attribute"})}),n&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddAttributeToComposite,children:"Add Attribute to Composite"})})]})}}var Ea=Object(m.a)((e=>({formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}})))(Object(c.b)((e=>({})),(e=>({})))(Aa)),Ta=a(373),Ia=a(364);const Na=window.erd;class Ra extends i.Component{constructor(...e){super(...e),this.state={name:this.props.contextDetails.name,isIdentifying:this.props.contextDetails.isIdentifying,slot0:this.props.contextDetails.slots[0],slot1:this.props.contextDetails.slots[1],showExact:!1},this.handleShowExactChange=e=>{const t=!this.state.showExact;this.setState({showExact:t})},this.handleNameChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.name=t,a.draw(),this.setState({name:t})},this.handleIdentifyingChange=e=>{const t=this.props.getStage();t.undoManager.startAction();const a=t.findById(this.props.contextDetails.id);a.details.isIdentifying=!a.details.isIdentifying,t.draw(),this.setState({isIdentifying:a.details.isIdentifying})},this.handleChangeEntity=e=>t=>{const a=`slot${e}`,s=this.props.getStage();s.undoManager.startAction();const i=s.findById(this.props.contextDetails.id),n=this.state[a],o=t.target.value;if(o!==n.entityId){if(0!==n.entityId){const t=i.getSlotConnector(e);t&&t.removeFromStage(s)}if(o>0){const t=s.findById(o);s.connect.items(t,i,{slotIndex:e})}this.setState({[a]:{...n,entityId:o}}),s.invokeDirtyCallback(),s.draw()}},this.handleMinimumChange=e=>t=>{const a=`slot${e}`,s=this.props.getStage(),i=s.findById(this.props.contextDetails.id);s.undoManager.startAction();const n=this.state[a];i.details.slots[e].minimum=t.target.value,s.invokeDirtyCallback(),s.draw(),this.setState({[a]:{...n,minimum:t.target.value}})},this.handleMaximumChange=e=>t=>{const a=`slot${e}`,s=this.props.getStage(),i=s.findById(this.props.contextDetails.id);s.undoManager.startAction();const n=this.state[a];i.details.slots[e].maximum=t.target.value,s.invokeDirtyCallback(),s.draw(),this.setState({[a]:{...n,maximum:t.target.value}})},this.handleRoleChange=e=>t=>{const a=`slot${e}`,s=this.props.getStage(),i=s.findById(this.props.contextDetails.id);s.undoManager.startAction();const n=this.state[a];i.details.slots[e].role=t.target.value,s.invokeDirtyCallback(),s.draw(),this.setState({[a]:{...n,role:t.target.value}})},this.handleParticipationChange=e=>t=>{const a=`slot${e}`,s=this.props.getStage(),i=s.findById(this.props.contextDetails.id);s.undoManager.startAction();const n=this.state[a];i.details.slots[e].participation=t.target.value,s.invokeDirtyCallback(),s.draw(),this.setState({[a]:{...n,participation:t.target.value}})},this.handleCardinalityChange=e=>t=>{const a=`slot${e}`,s=this.props.getStage(),i=s.findById(this.props.contextDetails.id);s.undoManager.startAction();const n=this.state[a];i.details.slots[e].cardinality=t.target.value,s.invokeDirtyCallback(),s.draw(),this.setState({[a]:{...n,cardinality:t.target.value}})},this.handleAddAttribute=()=>{const e=this.props.getStage();e.undoManager.hasCurrentAction()||e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id),a=t.getNextAutomaticPosition(),s=e.factory.attribute({x:a.x,y:a.y,name:"NewAttribute"});e.addItem(s),e.connect.items(s,t),e.selectItem(s),e.draw(),e.invokeDirtyCallback()}}componentDidMount(){const e=this.nameTextField;setTimeout((()=>{e.focus(),e.select()}),0)}render(){const e=this.props.getStage().findAllByType("Entity"),{showExact:t,slot0:a,slot1:i}=this.state,{classes:n}=this.props;return Object(s.jsxs)(q.a,{container:!0,spacing:0,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:n.formControl,children:[Object(s.jsx)(wt.a,{children:"Relationship Name"}),Object(s.jsx)(U.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:e=>this.nameTextField=e},className:n.textField})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(St.a,{component:"fieldset",children:Object(s.jsx)(va.a,{children:Object(s.jsx)(V.a,{label:"Identifying",control:Object(s.jsx)($.a,{checked:this.state.isIdentifying,onChange:this.handleIdentifyingChange})})})})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Entity One"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(St.a,{className:n.formControl,children:Object(s.jsxs)(Ta.a,{value:a.entityId,onChange:this.handleChangeEntity(0),displayEmpty:!0,name:"entity1",children:[Object(s.jsx)(Ne.a,{value:0,children:Object(s.jsx)("em",{children:"None"})}),e.map((e=>Object(s.jsx)(Ne.a,{value:e.details.id,children:e.details.name},e.details.id)))]})})}),!t&&Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(St.a,{component:"fieldset",children:Object(s.jsxs)(ft.a,{value:a.participation,onChange:this.handleParticipationChange(0),children:[Object(s.jsx)(V.a,{value:Na.ParticipationType.mandatory,control:Object(s.jsx)(Ct.a,{}),label:"Mandatory"}),Object(s.jsx)(V.a,{value:Na.ParticipationType.optional,control:Object(s.jsx)(Ct.a,{}),label:"Optional"}),Object(s.jsx)(V.a,{value:Na.ParticipationType.unspecified,control:Object(s.jsx)(Ct.a,{}),label:"Unspecified"})]})})}),!t&&Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(St.a,{component:"fieldset",children:Object(s.jsxs)(ft.a,{value:a.cardinality,onChange:this.handleCardinalityChange(0),children:[Object(s.jsx)(V.a,{value:Na.CardinalityType.one,control:Object(s.jsx)(Ct.a,{}),label:"One"}),Object(s.jsx)(V.a,{value:Na.CardinalityType.many,control:Object(s.jsx)(Ct.a,{}),label:"Many"}),Object(s.jsx)(V.a,{value:Na.CardinalityType.unspecified,control:Object(s.jsx)(Ct.a,{}),label:"Unspecified"})]})})}),t&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",children:[Object(s.jsx)(U.a,{id:"slot0min",label:"Minimum",margin:"normal",autoComplete:"off",value:a.minimum,onChange:this.handleMinimumChange(0)}),Object(s.jsx)(U.a,{id:"slot0max",label:"Maximum",margin:"normal",autoComplete:"off",value:a.maximum,onChange:this.handleMaximumChange(0)}),Object(s.jsx)(U.a,{id:"slot0role",label:"Role",margin:"normal",autoComplete:"off",value:a.role,onChange:this.handleRoleChange(0)})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Entity Two"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(St.a,{className:n.formControl,children:Object(s.jsxs)(Ta.a,{value:i.entityId,onChange:this.handleChangeEntity(1),displayEmpty:!0,name:"entity1",children:[Object(s.jsx)(Ne.a,{value:0,children:Object(s.jsx)("em",{children:"None"})}),e.map((e=>Object(s.jsx)(Ne.a,{value:e.details.id,children:e.details.name},e.details.id)))]})})}),!t&&Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(St.a,{component:"fieldset",children:Object(s.jsxs)(ft.a,{value:i.participation,onChange:this.handleParticipationChange(1),children:[Object(s.jsx)(V.a,{value:Na.ParticipationType.mandatory,control:Object(s.jsx)(Ct.a,{}),label:"Mandatory"}),Object(s.jsx)(V.a,{value:Na.ParticipationType.optional,control:Object(s.jsx)(Ct.a,{}),label:"Optional"}),Object(s.jsx)(V.a,{value:Na.ParticipationType.unspecified,control:Object(s.jsx)(Ct.a,{}),label:"Unspecified"})]})})}),!t&&Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(St.a,{component:"fieldset",children:Object(s.jsxs)(ft.a,{value:i.cardinality,onChange:this.handleCardinalityChange(1),children:[Object(s.jsx)(V.a,{value:Na.CardinalityType.one,control:Object(s.jsx)(Ct.a,{}),label:"One"}),Object(s.jsx)(V.a,{value:Na.CardinalityType.many,control:Object(s.jsx)(Ct.a,{}),label:"Many"}),Object(s.jsx)(V.a,{value:Na.CardinalityType.unspecified,control:Object(s.jsx)(Ct.a,{}),label:"Unspecified"})]})})}),t&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",children:[Object(s.jsx)(U.a,{id:"slot1min",label:"Minimum",margin:"normal",autoComplete:"off",value:i.minimum,onChange:this.handleMinimumChange(1)}),Object(s.jsx)(U.a,{id:"slot1max",label:"Maximum",margin:"normal",autoComplete:"off",value:i.maximum,onChange:this.handleMaximumChange(1)}),Object(s.jsx)(U.a,{id:"slot1role",label:"Role",margin:"normal",autoComplete:"off",value:i.role,onChange:this.handleRoleChange(1)})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(V.a,{control:Object(s.jsx)(Ia.a,{checked:this.state.showExact,onChange:this.handleShowExactChange,color:"primary"}),label:"Edit Exact Constraints"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{variant:"outlined",onClick:this.handleAddAttribute,children:"Add Attribute"})})]})}}var Ma=Object(m.a)((e=>({formControl:{marginTop:0,width:"100%"},textField:{marginTop:0,width:"100%"}})))(Object(l.f)(Object(c.b)(((e,t)=>({})),(e=>({})))(Ra)));class ka extends i.Component{constructor(...e){super(...e),this.state={...this.props.contextDetails},this.handleTextChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.text=t,a.draw(),this.setState({text:t})}}componentDidMount(){const e=this.textField;setTimeout((()=>{e.focus(),e.select()}),0)}render(){const{classes:e}=this.props;return Object(s.jsx)(q.a,{container:!0,spacing:0,children:Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:e.formControl,children:[Object(s.jsx)(wt.a,{children:"Text Label"}),Object(s.jsx)(U.a,{id:"text",margin:"normal",autoComplete:"off",value:this.state.text,onChange:this.handleTextChange,multiline:!0,variant:"outlined",maxrows:10,inputProps:{ref:e=>this.textField=e},className:e.textField})]})})})}}var Fa=Object(m.a)((e=>({formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}})))(Object(c.b)((e=>({})),(e=>({})))(ka)),Pa=a(367),_a=a(369),La=a(366),Ba=a(368),qa=a(365);var Ua=Object(m.a)((e=>({nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},nameCellPrimaryKey:{textAlign:"left",paddingLeft:8,paddingRight:4,fontWeight:800,textDecoration:"underline"},nameP:{width:80},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4},dataTypeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeSizeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeP:{width:90},dataTypeSizeP:{width:60},fkNoteP:{margin:0,textAlign:"right"}})))((function(e){const{classes:t,handleClickRow:a,names:i,pkMember:n,optional:o,soloUnique:r,dataType:l,fk:c,dataTypeSize:d}=e;return Object(s.jsxs)(qa.a,{hover:!0,onClick:a,children:[Object(s.jsx)(La.a,{className:n?t.nameCellPrimaryKey:t.nameCell,children:i.map(((e,a)=>Object(s.jsx)("p",{className:t.nameP,children:e},a)))}),!c&&Object(s.jsx)(La.a,{className:t.dataTypeCell,children:Object(s.jsx)("p",{className:t.dataTypeP,children:l&&l.name})}),!c&&Object(s.jsx)(La.a,{className:t.dataTypeSizeCell,children:Object(s.jsx)("p",{className:t.dataTypeSizeP,children:l&&d})}),c&&Object(s.jsx)(La.a,{colSpan:2,children:Object(s.jsx)("p",{className:t.fkNoteP,children:"(Foreign Key)"})})]})})),Ga=a(345);const za=[{id:"none",sql:"",name:"None",hasSize:!1,isCustom:!1},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0,isCustom:!1},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0,isCustom:!1},{id:"int",name:"INT",sql:"INT",hasSize:!1,isCustom:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0,isCustom:!1},{id:"date",name:"DATE",sql:"DATE",hasSize:!1,isCustom:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1,isCustom:!1},{id:"custom",name:"Custom",sql:"",hasSize:!0,isCustom:!0}];var Wa=Object(m.a)((e=>({nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:4,paddingRight:4},input:{width:"100%",fontSize:"0.8125rem"},dataTypeCell:{textAlign:"left",paddingLeft:4,paddingRight:4},dataTypeSelect:{width:90,fontSize:"0.8125rem"}})))((function(e){const t=t=>{t&&e.focusAttributeName&&setTimeout((()=>{t.focus(),t.select()}),0)},{classes:a,names:i,fk:n,dataType:o,dataTypeSize:r,handleAttributeNameChange:l,handleDataTypeChange:c,handleDataTypeSizeChange:d}=e;return Object(s.jsxs)(qa.a,{selected:!0,hover:!0,children:[Object(s.jsx)(La.a,{className:a.nameCell,children:i.map(((e,i)=>0===i?Object(s.jsx)(Ga.a,{value:e,className:a.input,inputProps:{ref:t},onChange:e=>l(e.target.value,i)},i):Object(s.jsx)(Ga.a,{value:e,className:a.input,onChange:e=>l(e.target.value,i)},i)))}),!n&&Object(s.jsx)(La.a,{className:a.dataTypeCell,children:Object(s.jsx)(St.a,{children:Object(s.jsx)(Ta.a,{value:o&&o.id,onChange:c,displayEmpty:!0,name:"dataType",className:a.dataTypeSelect,children:za.map((e=>Object(s.jsx)(Ne.a,{value:e.id,children:e.name},e.id)))})})}),!n&&Object(s.jsx)(La.a,{className:a.cell,children:o&&o.hasSize&&Object(s.jsx)(Ga.a,{value:r,className:a.input,onChange:d})}),n&&Object(s.jsx)(La.a,{colSpan:2,children:Object(s.jsx)("p",{className:a.fkNoteP,children:"Foreign Key data types cannot be changed."})})]})}));var Ha=Object(m.a)((e=>({nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4}})))((function(e){const{classes:t,attributes:a,selectedAttributeId:i,focusAttributeName:n,handleAttributeNameChange:o,handleClickRow:r,handleDataTypeChange:l,handleDataTypeSizeChange:c,dataTypes:d}=e;return Object(s.jsxs)(Pa.a,{children:[Object(s.jsx)(Ba.a,{children:Object(s.jsxs)(qa.a,{children:[Object(s.jsx)(La.a,{className:t.nameCell,children:"Name"}),Object(s.jsx)(La.a,{className:t.nameCell,children:"Data Type"}),Object(s.jsx)(La.a,{className:t.checkCell,children:"Data Type Size"})]})}),Object(s.jsx)(_a.a,{children:a.map((e=>{const t=(e=>{let t=za.find((t=>t.id===e));return t||(t=za.find((e=>"none"===e.id))),t})(e.dataType);return i===e.id?Object(s.jsx)(Wa,{names:e.names,pkMember:e.pkMember,fk:e.fk,dataType:t,dataTypeSize:e.dataTypeSize,handleAttributeNameChange:o,handleDataTypeChange:l,handleDataTypeSizeChange:c,dataTypes:d,focusAttributeName:n},e.id):Object(s.jsx)(Ua,{names:e.names,pkMember:e.pkMember,fk:e.fk,dataType:t,dataTypeSize:e.dataTypeSize,handleClickRow:()=>r(e.id)},e.id)}))})]})}));var Ka=Object(m.a)((e=>({cell:{textAlign:"center",paddingLeft:0,paddingRight:0}})))((function(e){const{classes:t,attributes:a,checkedAttributeIds:i,handleAttributeChecked:n,disabledAttributes:o}=e;let r=[];return o&&(r=o.map((e=>e.id))),Object(s.jsxs)(Pa.a,{children:[Object(s.jsx)(Ba.a,{children:Object(s.jsxs)(qa.a,{children:[Object(s.jsx)(La.a,{className:t.cell,children:"Key"}),Object(s.jsx)(La.a,{className:t.cell,children:"Name"})]})}),Object(s.jsx)(_a.a,{children:a.map((e=>Object(s.jsxs)(qa.a,{children:[Object(s.jsx)(La.a,{className:t.cell,children:Object(s.jsx)($.a,{disabled:r.includes(e.id),checked:i.includes(e.id),onChange:()=>n(e.id)})}),Object(s.jsx)(La.a,{children:e.names.map(((e,t)=>Object(s.jsx)("p",{children:e},t)))})]},e.id)))})]})})),Ya=a(184),Qa=a.n(Ya),Va=a(185),$a=a.n(Va);var Ja=Object(m.a)((e=>({nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:0,paddingRight:0}})))((function(e){const{classes:t,attributes:a,handleAttributeMoveUp:i,handleAttributeMoveDown:n}=e,o=[];for(let s=0;s<a.length;++s)o.push({...a[s],prevId:s>0?a[s-1].id:null,nextId:s<a.length-1?a[s+1].id:null});return Object(s.jsxs)(Pa.a,{children:[Object(s.jsx)(Ba.a,{children:Object(s.jsxs)(qa.a,{children:[Object(s.jsx)(La.a,{className:t.nameCell,children:"Name"}),Object(s.jsx)(La.a,{className:t.cell})]})}),Object(s.jsx)(_a.a,{children:o.map((e=>Object(s.jsxs)(qa.a,{children:[Object(s.jsx)(La.a,{className:t.nameCell,children:e.names.map(((e,t)=>Object(s.jsx)("p",{children:e},t)))}),Object(s.jsxs)(La.a,{className:t.cell,children:[Object(s.jsx)(_.a,{"aria-label":"Move Up",onClick:()=>i(e.id,e.prevId),disabled:!e.prevId,children:Object(s.jsx)(Qa.a,{})}),Object(s.jsx)(_.a,{"aria-label":"Move Down",onClick:()=>n(e.id,e.nextId),disabled:!e.nextId,children:Object(s.jsx)($a.a,{})})]})]},e.id)))})]})}));const Xa="normal",Za="remove",es="groups",ts="reorder",as="primaryKey",ss="unique",is="optional";class ns extends i.Component{constructor(...e){super(...e),this.state={...this.props.contextDetails,selectedAttributeId:0,mode:Xa,checkedAttributeIds:[],currentGroupIndex:-1,menuAnchor:null},this.handleNameChange=e=>{const t=e.target.value,a=this.props.getStage();a.undoManager.startAction();a.findById(this.props.contextDetails.id).details.name=t,a.draw(),this.setState({name:t})},this.handleClickRow=e=>{this.setState({selectedAttributeId:e,focusAttributeName:!0})},this.handleAttributeNameChange=(e,t)=>{const a=this.props.getStage();a.undoManager.startAction();const s=a.findById(this.props.contextDetails.id);s.getAttributeById(this.state.selectedAttributeId).names[t]=e,a.draw(),this.setState({...s.details,focusAttributeName:!1})},this.handleAddAttribute=()=>{const e=this.props.getStage();e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id).addAttribute({names:["New Column"]});e.draw(),this.setState({...this.props.contextDetails,selectedAttributeId:t.id,focusAttributeName:!0})},this.handleSetMode=e=>{this.setState({mode:e})},this.handleAttributeChecked=e=>{let t=[...this.state.checkedAttributeIds];t=t.includes(e)?t.filter((t=>t!==e)):[...t,e],this.setState({checkedAttributeIds:t})},this.handleRemoveCheckedAttributes=()=>{const e=this.props.getStage();e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id);this.state.checkedAttributeIds.forEach((a=>{const s=t.getAttributeById(a);t.removeAttribute(s,e)})),this.handleEndAttributeChecks(),e.draw()},this.handleEndAttributeChecks=()=>{this.setState({mode:Xa,checkedAttributeIds:[]})},this.handlePrimaryKeyMode=()=>{const e=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder().filter((e=>e.pkMember)).map((e=>e.id));this.setState({mode:as,checkedAttributeIds:e})},this.handleSavePrimaryKeyChecks=()=>{const e=this.props.getStage(),t=e.findById(this.props.contextDetails.id);t.removePkConnectors(e);t.getAttributesByOrder().map((e=>e.id)).forEach((e=>{const a=t.getAttributeById(e);a.pkMember=this.state.checkedAttributeIds.includes(a.id),a.pkMember&&(a.optional=!1)})),e.draw(),e.invokeDirtyCallback(),this.setState({...this.props.contextDetails,mode:Xa,checkedAttributeIds:[]})},this.handleCancelPrimaryKeyChecks=()=>{this.setState({mode:Xa,checkedAttributeIds:[]})},this.handleOptionalMode=()=>{const e=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder().filter((e=>e.optional)).map((e=>e.id));this.setState({mode:is,checkedAttributeIds:e})},this.handleSaveOptionalMode=()=>{const e=this.props.getStage(),t=e.findById(this.props.contextDetails.id);t.getAttributesByOrder().map((e=>e.id)).forEach((e=>{const a=t.getAttributeById(e);a.optional=this.state.checkedAttributeIds.includes(a.id)})),e.draw(),e.invokeDirtyCallback(),this.setState({...this.props.contextDetails,mode:Xa,checkedAttributeIds:[]})},this.handleCancelOptionalMode=()=>{this.setState({mode:Xa,checkedAttributeIds:[]})},this.handleUniqueMode=()=>{const e=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder().filter((e=>e.soloUnique)).map((e=>e.id));this.setState({mode:ss,checkedAttributeIds:e})},this.handleSaveUniqueMode=()=>{const e=this.props.getStage(),t=e.findById(this.props.contextDetails.id);t.getAttributesByOrder().map((e=>e.id)).forEach((e=>{const a=t.getAttributeById(e);a.soloUnique=this.state.checkedAttributeIds.includes(a.id)})),e.draw(),e.invokeDirtyCallback(),this.setState({...this.props.contextDetails,mode:Xa,checkedAttributeIds:[]})},this.handleCancelUniqueMode=()=>{this.setState({mode:Xa,checkedAttributeIds:[]})},this.handleEditGroup=e=>{const t=e>=0?this.state.uniqueGroups[e]:[];this.setState({currentGroupIndex:e,checkedAttributeIds:t}),this.handleMenuClose(),this.handleSetMode(es)},this.handleAddGroup=()=>{const e=this.props.getStage();e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id);t.details.uniqueGroups.push([]),e.draw();const a=t.details.uniqueGroups.length-1;this.setState({currentGroupIndex:a,checkedAttributeIds:[],contextDetails:t.details}),this.handleMenuClose(),this.handleSetMode(es)},this.handleRemoveGroup=()=>{let e=this.state.currentGroupIndex;const t=this.props.getStage();t.undoManager.startAction();const a=t.findById(this.props.contextDetails.id);a.details.uniqueGroups.splice(e,1),t.draw(),e=Math.min(e,a.details.uniqueGroups.lenght-1);const s=e>=0?this.state.uniqueGroups[e]:[];this.setState({currentGroupIndex:e,contextDetails:a.details,checkedAttributeIds:s}),this.handleSetMode(Xa)},this.handleGroupAttributeChecked=e=>{let t=[...this.state.checkedAttributeIds];t=t.includes(e)?t.filter((t=>t!==e)):[...t,e];const a=this.props.getStage();a.undoManager.startAction();const s=a.findById(this.props.contextDetails.id);s.details.uniqueGroups[this.state.currentGroupIndex]=t,a.draw(),this.setState({contextDetails:s.details,checkedAttributeIds:t})},this.handleMenuOpen=e=>{this.setState({menuAnchor:e})},this.handleMenuClose=()=>{this.setState({menuAnchor:null})},this.handleDataTypeChange=e=>{const t=this.props.getStage();t.undoManager.startAction();const a=t.findById(this.props.contextDetails.id).getAttributeById(this.state.selectedAttributeId);a.dataType=e.target.value,a.dataTypeSize="",t.draw(),this.setState({...this.props.contextDetails,focusAttributeName:!1})},this.handleDataTypeSizeChange=e=>{const t=this.props.getStage();t.undoManager.startAction();t.findById(this.props.contextDetails.id).getAttributeById(this.state.selectedAttributeId).dataTypeSize=e.target.value,t.draw(),this.setState({...this.props.contextDetails,focusAttributeName:!1})},this.handleEndAttributeReorder=()=>{this.setState({mode:Xa})},this.handleAttributeOrderSwap=(e,t)=>{const a=this.props.getStage();a.undoManager.startAction();const s=a.findById(this.props.contextDetails.id);s.details.sort="manual";const i=s.getAttributeById(e),n=s.getAttributeById(t);if(i.order===n.order){s.getAttributesByOrder().forEach(((e,t)=>{e.order=t}))}const o=i.order;i.order=n.order,n.order=o,s.updateAllAnchors(),a.draw(),this.setState({contextDetails:s.details})},this.handleAddRecursiveKey=()=>{const e=this.props.getStage();e.undoManager.startAction();const t=e.findById(this.props.contextDetails.id);e.connect.items(t,t),t.updateAllAnchors(),e.draw(),this.setState({contextDetails:t.details})}}componentDidMount(){const e=this.nameTextField;setTimeout((()=>{e.focus(),e.select()}),0)}render(){const{classes:e}=this.props,{menuAnchor:t,uniqueGroups:a,selectedAttributeId:i,focusAttributeName:n,mode:o,checkedAttributeIds:r,currentGroupIndex:l}=this.state,c=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder();return Object(s.jsxs)(q.a,{container:!0,spacing:0,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(St.a,{component:"fieldset",className:e.formControl,children:[Object(s.jsx)(wt.a,{children:"Table Name"}),Object(s.jsx)(U.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:e=>this.nameTextField=e},className:e.textField})]})}),o===Xa&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handlePrimaryKeyMode,children:"Primary Key"})}),Object(s.jsxs)(q.a,{item:!0,xs:6,children:[Object(s.jsx)(p.a,{"aria-owns":t?"ugroups-menu":null,variant:"outlined",className:e.mainButton,onClick:e=>this.handleMenuOpen(e.currentTarget),children:"(U) Groups ..."}),Object(s.jsxs)(Ie.a,{id:"ugroups-menu",open:Boolean(t),anchorEl:t,onClose:this.handleMenuClose,children:[Object(s.jsx)(Ne.a,{onClick:this.handleAddGroup,children:"Add New Unique Group"}),a.map(((e,t)=>Object(s.jsxs)(Ne.a,{value:t,onClick:()=>this.handleEditGroup(t),children:["Edit Unique Group ",t+1]},t)))]})]}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleAddRecursiveKey,children:"Recursive Key"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:()=>this.handleSetMode(ts),children:"Reorder ..."})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleUniqueMode,children:"Unique ..."})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleOptionalMode,children:"Optional ..."})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Columns"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleAddAttribute,children:"Add"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:()=>this.handleSetMode(Za),children:"Remove ..."})})]})}),o===as&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleSavePrimaryKeyChecks,children:"Save"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleCancelPrimaryKeyChecks,children:"Cancel"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Select columns for the Primary Key"})})]})}),o===Za&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleRemoveCheckedAttributes,children:"Remove"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleEndAttributeChecks,children:"Cancel"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Select columns to remove"})})]})}),o===ss&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleSaveUniqueMode,children:"Save"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleCancelUniqueMode,children:"Cancel"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Select Unique columns"})})]})}),o===is&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleSaveOptionalMode,children:"Save"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleCancelOptionalMode,children:"Cancel"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(wt.a,{children:"Select Optional columns"})})]})}),o===ts&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(q.a,{container:!0,spacing:1,children:Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleEndAttributeReorder,children:"Done"})})})}),o===es&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)(wt.a,{children:["Edit Unique Group ",l+1]})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleRemoveGroup,children:"Remove"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{variant:"outlined",className:e.mainButton,onClick:this.handleEndAttributeChecks,children:"Done"})})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsxs)("div",{className:e.tableContainer,children:[o===Xa&&Object(s.jsx)(Ha,{attributes:c,selectedAttributeId:i,focusAttributeName:n,handleAttributeNameChange:this.handleAttributeNameChange,handleClickRow:this.handleClickRow,handleDataTypeChange:this.handleDataTypeChange,handleDataTypeSizeChange:this.handleDataTypeSizeChange}),o===Za&&Object(s.jsx)(Ka,{attributes:c,checkedAttributeIds:r,handleAttributeChecked:this.handleAttributeChecked}),o===as&&Object(s.jsx)(Ka,{attributes:c,checkedAttributeIds:r,handleAttributeChecked:this.handleAttributeChecked}),o===ss&&Object(s.jsx)(Ka,{attributes:c,checkedAttributeIds:r,handleAttributeChecked:this.handleAttributeChecked}),o===is&&Object(s.jsx)(Ka,{attributes:c,checkedAttributeIds:r,handleAttributeChecked:this.handleAttributeChecked,disabledAttributes:c.filter((e=>e.pkMember))}),o===es&&Object(s.jsx)(Ka,{attributes:c,checkedAttributeIds:r,handleAttributeChecked:this.handleGroupAttributeChecked}),o===ts&&Object(s.jsx)(Ja,{attributes:c,handleAttributeMoveUp:this.handleAttributeOrderSwap,handleAttributeMoveDown:this.handleAttributeOrderSwap})]})})]})}}var os=Object(m.a)((e=>({tableContainer:{overflow:"auto"},cell:{textAlign:"center",paddingLeft:0,paddingRight:0},input:{width:"100%"},formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"},mainButton:{width:"100%"}})))(Object(l.f)(Object(c.b)(((e,t)=>({})),(e=>({})))(ns)));const rs=window.erd;class ls extends i.Component{constructor(){super(),this.tryLoadDiagram=()=>{const{editDiagram:e,setCanvasSize:t}=this.props;if(!this.isReady&&e){this.isReady=!0;const a=new rs.DiagramArchive(this.stage).fromJson(e.content);"number"===typeof a.width&&"number"===typeof a.height&&t(a.width,a.height)}this.stage&&this.isReady&&setTimeout((()=>this.stage.draw()),0),this.setUndoRedo()},this.setUndoRedo=()=>{this.stage&&this.props.setUndoRedo(this.stage.undoManager.canUndo(),this.stage.undoManager.canRedo())},this.activeItemChangedCallback=e=>{this.stage.undoManager.hasCurrentAction()&&this.stage.undoManager.endAction(),e?this.props.setContext(e.details,e.getType()):this.props.clearContext()},this.startMoveCallback=()=>{this.stage.undoManager.hasCurrentAction()&&this.stage.undoManager.endAction(),this.stage.undoManager.startAction()},this.endMoveCallback=()=>{this.stage.undoManager.endAction(),this.dirtyCallback()},this.connectModeEndCallback=()=>{},this.dirtyCallback=()=>{this.setUndoRedo(),this.props.setIsDirty(!0),this.autoSaveTimer&&(clearTimeout(this.autoSaveTimer),this.autoSaveTimer=null),this.autoSaveTimer=setTimeout(this.handleSave,8e3)},this.handleSave=()=>{this.autoSaveTimer&&(clearTimeout(this.autoSaveTimer),this.autoSaveTimer=null);const{saveEditDiagram:e,editDiagram:t}=this.props;e({...t,content:new rs.DiagramArchive(this.stage).toJson()})},this.mouseModeResetCallback=e=>{this.props.setMouseMode(e)},this.selectedCountChange=()=>{this.props.setCanDelete(this.stage.selectedCount())},this.getStage=()=>this.stage,this.isReady=!1,this.autoSaveTimer=null,this.canvasElement=n.a.createRef()}componentDidMount(){window.gtag("event","page_view",{page_path:"/edit-diagram"}),document.getElementById("root").style.height="100%";const e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new rs.DiagramStage(this.canvasElement.current,e),this.tryLoadDiagram()}componentDidUpdate(){this.tryLoadDiagram()}componentWillUnmount(){this.props.clearContext(),this.autoSaveTimer&&this.handleSave()}render(){const{classes:e,editDiagram:t,canvasWidth:a,canvasHeight:i,contextType:n,contextDetails:o,mouseMode:r}=this.props,l=t?t.diagramType:"none";let c=[e.canvas];return"connect"===r&&c.push(e.canvasConnectMode),Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsx)(Oa,{}),Object(s.jsx)(fa,{getStage:this.getStage}),Object(s.jsx)(ga,{diagramType:l,getStage:this.getStage,handleSave:this.handleSave}),Object(s.jsxs)("div",{className:e.workArea,children:[Object(s.jsx)("div",{className:e.canvasParent,children:Object(s.jsx)("canvas",{className:c.join(" "),width:a,height:i,ref:this.canvasElement})}),Object(s.jsxs)("div",{className:e.contextArea,children:["Entity"===n&&Object(s.jsx)(Da,{contextDetails:o,getStage:this.getStage},o.id),"Attribute"===n&&Object(s.jsx)(Ea,{contextDetails:o,getStage:this.getStage},o.id),"Relationship"===n&&Object(s.jsx)(Ma,{contextDetails:o,getStage:this.getStage},o.id),"Label"===n&&Object(s.jsx)(Fa,{contextDetails:o,getStage:this.getStage},o.id),"Table"===n&&Object(s.jsx)(os,{contextDetails:o,getStage:this.getStage},o.id),"Dimension"===n&&Object(s.jsx)(os,{contextDetails:o,getStage:this.getStage},o.id),"Fact"===n&&Object(s.jsx)(os,{contextDetails:o,getStage:this.getStage},o.id)]})]})]})}}var cs=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},workArea:{display:"flex",overflow:"hidden"},contextArea:{width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{flex:1,overflow:"scroll",height:"100%"},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}})))(Object(l.f)(Object(c.b)(((e,t)=>({editDiagram:we(e,t),canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,contextDetails:e.edit.contextDetails,contextType:e.edit.contextType,mouseMode:e.edit.mouseMode})),(e=>({setContext:(t,a)=>e(lt.setContext(t,a)),setIsDirty:t=>e(lt.setIsDirty(t)),clearContext:()=>e(lt.clearContext()),setMouseMode:t=>e(lt.setMouseMode(t)),setUndoRedo:(t,a)=>e(lt.setUndoRedo(t,a)),setCanDelete:t=>e(lt.setCanDelete(t)),setCanvasSize:(t,a)=>e(lt.setCanvasSize(t,a)),saveEditDiagram:t=>e(lt.saveEditDiagram(t))})))(ls)));const{Types:ds,Creators:hs}=Object(g.createActions)({resetPasswordStart:["email"],resetPasswordStartSuccess:["email","duration"],resetPasswordStartFailure:null,resetPasswordComplete:["token","password","history"],resetPasswordCompleteSuccess:null,resetPasswordCompleteFailure:null}),ms=Object(g.createReducer)({email:null,error:null,forgotSuccess:!1},{[ds.RESET_PASSWORD_START]:e=>({...e,forgotSuccess:!1}),[ds.RESET_PASSWORD_START_SUCCESS]:(e,t)=>({...e,email:t.email,duration:t.duration,forgotSuccess:!0}),[ds.RESET_PASSWORD_START_FAILURE]:(e,t)=>({...e,error:t.error}),[ds.RESET_PASSWORD_COMPLETE]:e=>e,[ds.RESET_PASSWORD_COMPLETE_SUCCESS]:e=>e,[ds.RESET_PASSWORD_COMPLETE_FAILURE]:e=>e}),ps=ds;var us=hs;const bs=Object(Ce.a)([(e,t)=>t.history.location.pathname],(e=>{const t=e.split("/");if(3===t.length&&"reset-password"===t[1]){return t[2]}return null}));class js extends i.Component{constructor(...e){super(...e),this.state={password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},this.handlePasswordChange=e=>{this.setState({password:e.target.value,isPasswordDirty:!0})},this.handleConfirmPasswordChange=e=>{this.setState({confirmPassword:e.target.value,isConfirmPasswordDirty:!0})},this.handleSubmit=()=>{this.props.resetPasswordComplete(this.props.token,this.state.password,this.props.history)}}componentDidMount(){window.gtag("event","page_view",{page_path:"/reset-password"})}render(){const{classes:e}=this.props,{password:t,confirmPassword:a,isPasswordDirty:i,isConfirmPasswordDirty:n}=this.state,o=!t||t.length<8||t!==a,r=i&&t.length<8?"Password must be longer than 8 characters":"",l=n&&t!==a?"Passwords do not match":"";return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"Reset Forgotten Password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"password",label:"Password",margin:"normal",className:e.textField,value:t,onChange:this.handlePasswordChange,helperText:r,type:"password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:e.textField,value:a,onChange:this.handleConfirmPasswordChange,helperText:l,type:"password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{className:e.submitButton,disabled:o,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Set Password"})})]})]})}}var gs=Object(m.a)((e=>({textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}})))(Object(l.f)(Object(c.b)(((e,t)=>({duration:e.resetPassword.duration,token:bs(e,t)})),(e=>({resetPasswordComplete:(t,a,s)=>e(us.resetPasswordComplete(t,a,s))})))(js)));class xs extends i.Component{constructor(...e){super(...e),this.state={email:""},this.catchReturn=e=>{"Enter"===e.key&&(e.preventDefault(),this.handleSubmit())},this.handleEmailChange=e=>{this.setState({email:e.target.value})},this.handleSubmit=()=>{const{email:e}=this.state;e&&this.props.resetPasswordStart(e)}}componentDidMount(){window.gtag("event","page_view",{page_path:"/forgot-password"})}render(){const{email:e}=this.state,{classes:t,forgotSuccess:a}=this.props,i=!e;return Object(s.jsxs)("section",{className:t.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,className:t.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"Forgot Password"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"email",label:"Email",margin:"normal",className:t.textField,value:e,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})}),!a&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{className:t.submitButton,disabled:i,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Submit"})}),a&&Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"body1",children:"Check your email for the reset password link."})})]})]})}}var Os=Object(m.a)((e=>({textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}})))(Object(l.f)(Object(c.b)((e=>({forgotSuccess:e.resetPassword.forgotSuccess})),(e=>({resetPasswordStart:t=>e(us.resetPasswordStart(t))})))(xs)));class ys extends i.Component{componentDidMount(){window.gtag("event","page_view",{page_path:"/privacy-policy"})}render(){const{classes:e}=this.props;return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,md:3}),Object(s.jsxs)(q.a,{item:!0,xs:12,md:6,className:e.words,children:[Object(s.jsx)(G.a,{variant:"h3",className:e.title,children:"Privacy Policy"}),Object(s.jsx)(G.a,{variant:"body1",children:"This privacy policy discloses the privacy practices for https://erdplus.com. This privacy policy applies solely to information collected by this web site. It will notify you of the following:"}),Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"What personally identifiable information is collected from you through the web site, how it is used and with whom it may be shared."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"What choices are available to you regarding the use of your data."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"The security procedures in place to protect the misuse of your information."})})]}),Object(s.jsx)(G.a,{variant:"h6",children:"Information Collection, Use, and Sharing"}),Object(s.jsx)(G.a,{variant:"body1",children:"We are the sole owners of the information collected on this site. We only have access to/collect information that you voluntarily give us via email or other direct contact from you. We will not sell or rent this information to anyone. We will use your information to respond to you, regarding the reason you contacted us. We will not share your information with any third party outside of our organization."}),Object(s.jsx)(G.a,{variant:"h6",children:"Your Access to and Control Over Information"}),Object(s.jsx)(G.a,{variant:"body1",children:"You can do the following at any time by contacting us via the email address on our website:"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"See what data we have about you, if any."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Change/correct any data we have about you."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Have us delete any data we have about you."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Express any concern you have about our use of your data."})})]}),Object(s.jsx)(G.a,{variant:"h6",children:"Security"}),Object(s.jsx)(G.a,{variant:"body1",children:"We take precautions to protect your information. When you submit sensitive information via the website, your information is protected both online and offline."}),Object(s.jsx)(G.a,{variant:"body1",children:'Wherever we collect sensitive information (such as passwords), that information is encrypted and transmitted to us in a secure way. You can verify this by looking for a closed lock icon at the bottom of your web browser, or looking for "https" at the beginning of the address of the web page.'}),Object(s.jsx)(G.a,{variant:"body1",children:"While we use encryption to protect sensitive information transmitted online, we also protect your information offline. Only employees who need the information to perform a specific job are granted access to personally identifiable information. The computers/servers in which we store personally identifiable information are kept in a secure environment."}),Object(s.jsx)(G.a,{variant:"h6",children:"Registration"}),Object(s.jsx)(G.a,{variant:"body1",children:"In order to use this website, a user may first optionally complete the registration form. Registration is required to use some features of the site. During registration a user is required to give certain information (such as name and email address). This information is used to contact you about the products/services on our site in which you have expressed interest."}),Object(s.jsx)(G.a,{variant:"h6",children:"Cookies"}),Object(s.jsx)(G.a,{variant:"body1",children:'We use "cookies" on this site. A cookie is a piece of data stored on a site visitor\'s hard drive to help us improve your access to our site and identify repeat visitors to our site. For instance, when we use a cookie to identify you, you would not have to log in a password more than once, thereby saving time while on our site. Cookies can also enable us to track and target the interests of our users to enhance the experience on our site. Usage of a cookie is in no way linked to any personally identifiable information on our site.'}),Object(s.jsx)(G.a,{variant:"h6",children:"Updates"}),Object(s.jsx)(G.a,{variant:"body1",children:"Our Privacy Policy may change from time to time and all updates will be posted on this page."}),Object(s.jsx)(G.a,{variant:"body1",children:"If you feel that we are not abiding by this privacy policy, you should contact us immediately via email to info@erdplus.com."})]}),Object(s.jsx)(q.a,{item:!0,md:3})]})]})}}var Cs=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},title:{marginTop:20,marginBottom:10},words:{margin:10}})))(Object(c.b)((e=>({})),(e=>({})))(ys));class fs extends i.Component{componentDidMount(){window.gtag("event","page_view",{page_path:"/"})}render(){const{classes:e}=this.props;return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{className:e.header}),Object(s.jsx)(ea,{className:e.headerAdd,dataAdSlot:"6806589100"}),Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(s.jsx)("img",{alt:"ERDPlus logo",src:"erdplus_logo_large.png"})}),Object(s.jsx)(q.a,{item:!0,xs:3}),Object(s.jsx)(q.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(s.jsx)(G.a,{variant:"h5",children:"A database modeling tool for creating Entity Relationship Diagrams, Relational Schemas, Star Schemas, and SQL DDL statements."})}),Object(s.jsx)(q.a,{item:!0,xs:4,className:e.descriptionGridItem,children:Object(s.jsxs)(z.a,{className:e.descriptionPaper,elevation:2,children:[Object(s.jsx)(G.a,{variant:"h6",children:"Database Modeling"}),Object(s.jsx)(G.a,{variant:"body1",children:"ERDPlus is a web-based database modeling tool that lets you quickly and easily create"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Entity Relationship Diagrams (ERDs)"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Relational Schemas (Relational Diagrams)"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Star Schemas (Dimensional Models)"})})]}),Object(s.jsx)(G.a,{variant:"body1",children:"More features"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Automatically convert ER Diagrams into Relational Schemas"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Export SQL"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Export diagrams as a PNG"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Save diagrams safely on our server"})})]})]})}),Object(s.jsx)(q.a,{item:!0,xs:4,className:e.descriptionGridItem,children:Object(s.jsxs)(z.a,{className:e.descriptionPaper,elevation:2,children:[Object(s.jsx)(G.a,{variant:"h6",children:"SQL DDL Statements"}),Object(s.jsx)(G.a,{variant:"body1",children:"Export standard SQL"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Generate SQL from Relational Schemas and Star Schemas"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Select from common data types and data sizes"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Works with most contemporary RDBMS tools including Oracle, MySQL, Microsoft SQL Server, PostgresSQL, Teradata, IBM DB2, Microsoft Access, and others."})})]})]})}),Object(s.jsx)(q.a,{item:!0,xs:4,children:Object(s.jsxs)(z.a,{className:e.descriptionPaper,elevation:2,children:[Object(s.jsx)(G.a,{variant:"h6",children:"Textbook"}),Object(s.jsx)(G.a,{variant:"body1",children:"The Edition 2.0 of the textbook using ERDPlus is now available."}),Object(s.jsx)("a",{href:"https://www.prospectpressvt.com/textbooks/jukic-database-systems-introduction-to-databases-and-data-warehouses-2-0?hsLang=en",children:Object(s.jsx)("img",{alt:"Database systems textbook cover",src:"dbtextbook_cover_2nd.webp",className:e.textbookImage})})]})}),Object(s.jsx)(q.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(s.jsx)(ea,{dataAdSlot:"5087156909"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(z.a,{elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h3",children:"Entity Relationship Diagrams (ERDs)"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("img",{alt:"Sample entity-relation diagram",src:"ERDSample.png"})}),Object(s.jsxs)(q.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(s.jsx)(G.a,{variant:"h6",children:"ERDPlus enables drawing standard ERD components."}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Entities"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Attributes"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Relationships"})})]}),Object(s.jsx)(G.a,{variant:"body1",children:"The notation supports drawing regular and weak entities, various types of attributes (regular, unique, multi-valued, derived, composite, and optional), and all possible cardinality constraints of relationships (mandatory-many, optional-many, mandatory-one and optional-one)."})]}),Object(s.jsx)(q.a,{item:!0,xs:8,children:Object(s.jsx)("img",{alt:"Animation showing creating an ER diagram",src:"ERDAnimation.gif"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(z.a,{elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h3",children:"Relational Schemas"})}),Object(s.jsxs)(q.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(s.jsx)(G.a,{variant:"h6",children:"ERDPlus enables drawing standard Relational Schema components"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Tables (Relations)"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Table Columns (including Primary and Foreign Keys)"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Referential Integrity Constraint Lines (pointing from a Foreign Key to the Primary Key it refers to)"})})]}),Object(s.jsx)(G.a,{variant:"body1",children:"The tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating relational schemas."})]}),Object(s.jsx)(q.a,{item:!0,xs:8,children:Object(s.jsx)("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("img",{alt:"Sample relational schema diagram",src:"RelationalSchemaSample.png"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(s.jsx)(ea,{dataAdSlot:"9142202976"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(z.a,{elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h3",children:"Automatically Convert ER Diagrams to Relational Schemas"})}),Object(s.jsxs)(q.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(s.jsx)(G.a,{variant:"h6",children:"Convert ER Diagrams"}),Object(s.jsx)(G.a,{variant:"body1",children:"ERDPlus enables automatic conversion of ER Diagrams to Relational Schemas with one click of a button. This vastly speeds up the process of creating a Relational Schema based on an ER Diagram."}),Object(s.jsx)(G.a,{variant:"h6",children:"To use this feature"}),Object(s.jsxs)("ol",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Log into your account."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Click on the drop menu next to the name of any ER Diagram and chose \u201cConvert to Relational Schema\u201d option."})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"This will create a diagram containing the converted Relational Schema."})})]}),Object(s.jsx)(G.a,{variant:"body1"})]}),Object(s.jsx)(q.a,{item:!0,xs:8,children:Object(s.jsx)("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("img",{alt:"An ER diagram that can be converted into a relational schema",src:"ERDSample.png"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("img",{alt:"Sample relational schema automatically created from the ER diagram",src:"RelationalSchemaSample.png"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(z.a,{elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h3",children:"Star Schemas"})}),Object(s.jsxs)(q.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(s.jsx)(G.a,{variant:"h6",children:"ERDPlus enables drawing Star Schema components."}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Fact Tables (Facts)"})}),Object(s.jsx)("li",{children:Object(s.jsx)(G.a,{variant:"body1",children:"Dimension Tables (Dimensions)"})})]}),Object(s.jsx)(G.a,{variant:"body1",children:"The notation distinguishes fact tables from dimension tables by using a thicker frame around fact tables. This makes star schema diagrams easier to interpret. As with relational schemas, the tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating star schemas."})]}),Object(s.jsx)(q.a,{item:!0,xs:8,children:Object(s.jsx)("img",{alt:"Short animation creating a star schema",src:"StarSchemaAnimation.gif"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)("img",{alt:"An example star schema",src:"StarSchemaSample.png"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(s.jsx)(ea,{dataAdSlot:"3889876296"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(z.a,{elevation:2,children:Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h3",children:"Export SQL"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)("img",{alt:"An example relational schema that can be converted to SQL",src:"RelationalSchemaForSql.png"})}),Object(s.jsx)(q.a,{item:!0,xs:6,children:Object(s.jsx)("pre",{className:e.sqlBlock,children:"CREATE TABLE PRODUCT\n(\n  ProductID INT NOT NULL,\n  ProductName VARCHAR(64) NOT NULL,\n  ProductPrice DECIMAL(4, 2) NOT NULL,\n  PRIMARY KEY (ProductID)\n);\n\nCREATE TABLE CUSTOMER\n(\n  CustomerID INT NOT NULL,\n  CustomerName VARCHAR(40) NOT NULL,\n  CustomerZip VARCHAR(10) NOT NULL,\n  PRIMARY KEY (CustomerID)\n);\n\nCREATE TABLE SALESTRANSACTION\n(\n  TID INT NOT NULL,\n  Tdate DATE NOT NULL,\n  CustomerID INTEGER NOT NULL,\n  PRIMARY KEY (TID),\n  FOREIGN KEY (CustomerID) REFERENCES CUSTOMER(CustomerID)\n);\n\nCREATE TABLE SOLDVIA\n(\n  ProductID INT NOT NULL,\n  TID INT NOT NULL,\n  PRIMARY KEY (ProductID, TID),\n  FOREIGN KEY (ProductID) REFERENCES PRODUCT(ProductID),\n  FOREIGN KEY (TID) REFERENCES SALESTRANSACTION(TID)\n);"})})]})})}),Object(s.jsx)(q.a,{item:!0,xs:4,children:"Copyright \xa9 ERDPlus 2015-2023"}),Object(s.jsx)(q.a,{item:!0,xs:4,children:Object(s.jsx)(j.a,{to:"/privacy-policy",children:"Privacy Policy"})}),Object(s.jsx)(q.a,{item:!0,xs:4,children:Object(s.jsx)(j.a,{to:"mailto:info@erdplus.com",children:"info@erdplus.com"})}),Object(s.jsx)(q.a,{item:!0,xs:4,className:e.version,children:Object(s.jsxs)(G.a,{variant:"caption",children:["production"," / ","1732143046"," / ","4da90f14122e26eccad43f10f4e0d27655cb769c"]})})]})]})}}var Ss=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{padding:e.spacing(3),textAlign:"center",marginTop:e.spacing(1),marginBottom:e.spacing(1)},descriptionGridItem:{},descriptionPaper:{textAlign:"left",padding:20,height:440},textbookImage:{width:200,textAlign:"center",margin:20,border:"1px solid #aaa"},partnerLoyolaImage:{width:175},parnterAptitiveImage:{width:175,border:"1px solid #ddd"},sqlBlock:{textAlign:"left"},textAlignLeft:{textAlign:"left"},footerGrid:{backgroundColor:"#eeeeee",textAlign:"center",paddingTop:40,paddingBottom:40},version:{textAlign:"center"},upgrade:{border:"5px solid #11aa11"},header:{position:"fixed",width:"100%",zIndex:1e3},headerAdd:{marginTop:"72px",marginLeft:"16px"}})))(Object(c.b)((e=>({})),(e=>({})))(fs));const ws=window.gapi;class Ds extends i.Component{constructor(...e){super(...e),this.state={email:"",password:""},this.componentDidMount=()=>{window.gtag("event","page_view",{page_path:"/login"}),ws.load("auth2",(()=>{ws.auth2.init({client_id:"935519046542-t7la3ci754e31p6lot2mo9r36mq5d2d4.apps.googleusercontent.com"}).attachClickHandler("google-login",{},(e=>{const t=e.getAuthResponse().id_token;this.props.googleLogin(t,this.props.history)}),(e=>{console.log(e)}))}))},this.handleEmailChange=e=>{this.setState({email:e.target.value})},this.handlePasswordChange=e=>{this.setState({password:e.target.value})},this.handleSubmit=()=>{const{email:e,password:t}=this.state;this.props.login(e,t,this.props.history)},this.catchReturn=e=>{if("Enter"===e.key){e.preventDefault();const{email:t,password:a}=this.state;t&&a&&this.handleSubmit()}}}render(){const{email:e,password:t}=this.state,{classes:a}=this.props,i=!e||!t;return Object(s.jsxs)("section",{className:a.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,className:a.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"Login"})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"email",label:"Email",margin:"normal",className:a.textField,value:e,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(U.a,{id:"password",label:"Password",margin:"normal",className:a.textField,value:t,onChange:this.handlePasswordChange,type:"password",onKeyPress:this.catchReturn})}),Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(p.a,{className:a.loginButton,disabled:i,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Login"})}),Object(s.jsxs)(q.a,{item:!0,xs:12,children:[Object(s.jsx)(p.a,{component:j.a,to:"/create-account",children:"Create Account"}),Object(s.jsx)(p.a,{component:j.a,to:"/forgot-password",children:"Forgot Password"})]}),Object(s.jsxs)(q.a,{item:!0,xs:12,children:[Object(s.jsx)("p",{children:"New users are encouraged to create an account with an email and password."}),Object(s.jsxs)(p.a,{id:"google-login",variant:"outlined",className:a.loginButton,children:[Object(s.jsx)("img",{alt:"Google Logo",src:"g-logo.png",className:a.socialButtonImage}),"Signin with Google"]})]})]})]})}}var vs=Object(m.a)((e=>({textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"},loginButton:{margin:e.spacing(1),width:250},socialButtonImage:{height:24,marginRight:5,backgroundColor:"#ffffff"}})))(Object(l.f)(Object(c.b)((e=>({})),(e=>({login:(t,a,s)=>e(f.login(t,a,s)),googleLogin:(t,a)=>e(f.googleLogin(t,a))})))(Ds)));const As=window.erd,Es={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]};class Ts extends i.Component{constructor(...e){super(...e),this.state={menuAnchor:null},this.handleSave=()=>{const{saveDiagram:e,editDiagram:t}=this.props,a=this.props.getStage();e({...t,content:new As.DiagramArchive(a).toJson()}),this.handleMenuClose()},this.handleImport=()=>{this.props.importDiagramDialogShow(),this.handleMenuClose()},this.handleUndo=()=>{const e=this.props.getStage();this.props.clearContext(),e.undoManager.undo()},this.handleRedo=()=>{const e=this.props.getStage();this.props.clearContext(),e.undoManager.redo()},this.handleDelete=()=>{const e=this.props.getStage();e.deleteSelection(),this.props.clearContext(),e.draw()},this.changeMode=e=>{const t=this.props.getStage(),{setMouseMode:a}=this.props;t.undoManager.hasCurrentAction()&&t.undoManager.endAction(),t.mouseMode=e,a(e)},this.handleMenuClick=e=>{this.setState({menuAnchor:e})},this.handleMenuClose=()=>{this.setState({menuAnchor:null})},this.handleExportImage=()=>{const{showExportImageDialog:e,createExportImageData:t,exportImageTransparent:a,exportImageScale:s}=this.props,i=this.props.getStage(),n=new As.DiagramArchive(i).toJson();e(n),t(n,a,s),this.handleMenuClose()},this.handleResize=()=>{const e=this.props.getStage().getBounds(!1);this.props.showCanvasSizeDialog(e.right,e.bottom),this.setState({menuAnchor:null})},this.newERDiagram=()=>{this.handleMenuClose(),this.props.newERDiagram()},this.newRelationalSchema=()=>{this.handleMenuClose(),this.props.newRelationalSchema()},this.newStarSchema=()=>{this.handleMenuClose(),this.props.newStarSchema()}}render(){const{menuAnchor:e}=this.state,{classes:t,diagramType:a,mouseMode:i,canUndo:n,canRedo:o,canDelete:r}=this.props,l=Es[a];return Object(s.jsxs)("div",{className:t.buttonBar,children:[Object(s.jsxs)(Ie.a,{id:"diagram-menu",open:Boolean(e),anchorEl:e,onClose:this.handleMenuClose,children:[Object(s.jsx)(Ne.a,{onClick:this.newERDiagram,children:"New ER Diagram"}),Object(s.jsx)(Ne.a,{onClick:this.newRelationalSchema,children:"New Relational Schema"}),Object(s.jsx)(Ne.a,{onClick:this.newStarSchema,children:"New Star Schema"}),Object(s.jsx)("hr",{}),Object(s.jsx)(Ne.a,{onClick:this.handleSave,children:"Export ..."}),Object(s.jsx)(Ne.a,{onClick:this.handleImport,children:"Import ..."}),Object(s.jsx)("hr",{}),Object(s.jsx)(Ne.a,{onClick:this.handleExportImage,children:"Export Image ..."}),Object(s.jsx)(Ne.a,{onClick:this.handleResize,children:"Canvas Size ..."})]}),Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:e=>this.handleMenuClick(e.currentTarget),children:[Object(s.jsx)(ha.a,{})," Menu"]}),"none"!==a&&Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleUndo,disabled:!n,children:[Object(s.jsx)(na.a,{})," Undo"]}),"none"!==a&&Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleRedo,disabled:!o,children:[Object(s.jsx)(ra.a,{})," Redo"]}),"none"!==a&&Object(s.jsxs)(p.a,{variant:"outlined",className:t.button,onClick:this.handleDelete,disabled:!r,children:[Object(s.jsx)(ca.a,{})," Delete"]}),l.map((e=>Object(s.jsx)(p.a,{variant:"outlined",className:t.button,color:e.mouseMode===i?"primary":"default",onClick:()=>this.changeMode(e.mouseMode),children:e.name},e.mouseMode)))]})}}var Is=Object(m.a)((e=>({button:{marginTop:e.spacing(1),marginBottom:0,marginLeft:e.spacing(1),marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}})))(Object(l.f)(Object(c.b)(((e,t)=>({exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale})),(e=>({showExportImageDialog:t=>e(lt.showExportImageDialog(t)),createExportImageData:(t,a,s)=>e(lt.createExportImageData(t,a,s)),importDiagramDialogShow:()=>e(_e.importDiagramDialogShow())})))(Ts)));const Ns=window.erd,Rs=window.saveAs;class Ms extends i.Component{constructor(){super(),this.state={diagramType:"er",contextType:"",contextDetails:null,mouseMode:"none",editDiagram:null,canUndo:!1,canRedo:!1,canDelete:!1,exportImageTransparent:!1,exportImageScale:null},this.activeItemChangedCallback=e=>{this.stage.undoManager.hasCurrentAction()&&this.stage.undoManager.endAction(),e?this.setState({contextType:e.getType(),contextDetails:e.details}):this.setState({contextType:"",contextDetails:null})},this.clearContext=()=>{this.setState({contextType:"",contextDetails:null})},this.startMoveCallback=()=>{this.stage.undoManager.hasCurrentAction()&&this.stage.undoManager.endAction(),this.stage.undoManager.startAction()},this.endMoveCallback=()=>{this.stage.undoManager.endAction(),this.dirtyCallback()},this.connectModeEndCallback=()=>{},this.dirtyCallback=()=>{this.setState({canUndo:this.stage.undoManager.canUndo(),canRedo:this.stage.undoManager.canRedo()})},this.mouseModeResetCallback=e=>{this.setState({mouseMode:e})},this.selectedCountChange=()=>{this.setState({canDelete:this.stage.selectedCount()>0})},this.newERDiagram=()=>{this.newDiagram("er")},this.newRelationalSchema=()=>{this.newDiagram("relational")},this.newStarSchema=()=>{this.newDiagram("star")},this.newDiagram=e=>{const t=JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3}),a=new Ns.DiagramArchive(this.stage).fromJson(t);this.setState({diagramType:e}),this.props.setCanvasSize(a.width,a.height)},this.getStage=()=>this.stage,this.setMouseMode=e=>{this.setState({mouseMode:e})},this.saveDiagram=e=>{const t=new Blob([e.content],{type:"text/plain;charset=utf-8"});Rs(t,`${e.name}.erdplus`)},this.importDiagrams=e=>{if(1===e.length){const t=e[0],a=new Ns.DiagramArchive(this.stage).fromJson(t.content);this.setState({diagramType:t.diagramType}),this.props.setCanvasSize(a.width,a.height),this.props.importDiagramDialogCancel(),setTimeout((()=>this.stage.draw()),0)}},this.showCanvasSizeDialog=(e,t)=>{this.props.showCanvasSizeDialog(e,t)},this.isReady=!1,this.canvasElement=n.a.createRef()}componentDidMount(){window.gtag("event","page_view",{page_path:"/standalone"}),document.getElementById("root").style.height="100%";const e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new Ns.DiagramStage(this.canvasElement.current,e)}render(){const{diagramType:e,contextType:t,contextDetails:a,mouseMode:i,editDiagram:n,canUndo:o,canRedo:r,canDelete:l,exportImageTransparent:c,exportImageScale:d}=this.state,{classes:h,canvasWidth:m,canvasHeight:p}=this.props;let u=[h.canvas];return"connect"===i&&u.push(h.canvasConnectMode),Object(s.jsxs)("section",{className:h.section,children:[Object(s.jsx)(B,{}),Object(s.jsx)(Oa,{}),Object(s.jsx)(fa,{getStage:this.getStage}),Object(s.jsx)(Wt,{importDiagrams:this.importDiagrams,standalone:!0}),Object(s.jsx)(Is,{diagramType:e,getStage:this.getStage,setMouseMode:this.setMouseMode,saveDiagram:this.saveDiagram,showCanvasSizeDialog:this.showCanvasSizeDialog,mouseMode:i,editDiagram:n,canUndo:o,canRedo:r,canDelete:l,exportImageTransparent:c,exportImageScale:d,newERDiagram:this.newERDiagram,newRelationalSchema:this.newRelationalSchema,newStarSchema:this.newStarSchema,clearContext:this.clearContext}),Object(s.jsxs)("div",{className:h.workArea,children:[Object(s.jsx)("div",{className:h.canvasParent,children:Object(s.jsx)("canvas",{className:u.join(" "),width:m,height:p,ref:this.canvasElement})}),Object(s.jsxs)("div",{className:h.contextArea,children:["Entity"===t&&Object(s.jsx)(Da,{contextDetails:a,getStage:this.getStage},a.id),"Attribute"===t&&Object(s.jsx)(Ea,{contextDetails:a,getStage:this.getStage},a.id),"Relationship"===t&&Object(s.jsx)(Ma,{contextDetails:a,getStage:this.getStage},a.id),"Label"===t&&Object(s.jsx)(Fa,{contextDetails:a,getStage:this.getStage},a.id),"Table"===t&&Object(s.jsx)(os,{contextDetails:a,getStage:this.getStage},a.id),"Dimension"===t&&Object(s.jsx)(os,{contextDetails:a,getStage:this.getStage},a.id),"Fact"===t&&Object(s.jsx)(os,{contextDetails:a,getStage:this.getStage},a.id)]})]})]})}}var ks=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},workArea:{display:"flex",overflow:"hidden"},contextArea:{width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{flex:1,overflow:"scroll",height:"100%"},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}})))(Object(l.f)(Object(c.b)(((e,t)=>({canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight})),(e=>({setCanvasSize:(t,a)=>e(lt.setCanvasSize(t,a)),showCanvasSizeDialog:(t,a)=>e(lt.showCanvasSizeDialog(t,a)),importDiagramDialogCancel:()=>e(_e.importDiagramDialogCancel())})))(Ms)));class Fs extends i.Component{render(){const{classes:e}=this.props;return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{}),Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,className:e.center,children:Object(s.jsx)(G.a,{variant:"h3",children:"404"})}),Object(s.jsx)(q.a,{item:!0,xs:12,className:e.center,children:Object(s.jsx)(G.a,{variant:"h3",children:"Page Not Found"})})]})]})}}var Ps=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},center:{textAlign:"center",marginTop:25}})))(Object(c.b)((e=>({})),(e=>({})))(Fs));const _s="#4C3310";var Ls={palette:{primary:{main:"#536DFE"},secondary:{main:"#FF5C93"},warning:{main:"#FFC260"},success:{main:"#3CD4A0"},info:{main:"#9013FE"},text:{primary:_s,secondary:_s,hint:_s}},zIndex:{appBar:1250},typography:{}};class Bs extends i.Component{componentDidMount(){}render(){const{classes:e}=this.props;return Object(s.jsx)("section",{className:e.section,children:Object(s.jsxs)(q.a,{container:!0,spacing:1,children:[Object(s.jsx)(q.a,{item:!0,xs:12,className:e.center,children:Object(s.jsx)(E.a,{className:e.spinner})}),Object(s.jsx)(q.a,{item:!0,xs:12,className:e.center,children:Object(s.jsx)(G.a,{variant:"h4",children:"Loading"})})]})})}}var qs=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#d0d0d0"},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},spinner:{animation:"$rotator 1.4s linear infinite",width:125,height:125,color:"#4C3310"},center:{textAlign:"center"}})))(Object(l.f)(Object(c.b)((e=>({})),(e=>({})))(Bs)));class Us extends i.Component{constructor(e){super(e),this.toggleAnswer=()=>{this.setState((e=>({isActive:!e.isActive})))},this.state={isActive:!1}}render(){const{classes:e,question:t,answer:a}=this.props,{isActive:i}=this.state;return Object(s.jsxs)("div",{children:[Object(s.jsxs)(z.a,{className:i?e.active:e.question,onClick:this.toggleAnswer,children:[Object(s.jsx)(G.a,{variant:"h6",children:t}),Object(s.jsx)("div",{className:e.plusCircle,children:Object(s.jsx)("div",{className:e.plusSign,children:"+"})})]}),i&&Object(s.jsx)("div",{className:e.answer,children:Object(s.jsxs)(G.a,{children:[Object(s.jsx)("b",{children:"Answer:"})," ",a]})})]})}}var Gs=Object(m.a)((e=>({body:{fontFamily:"Mastro Sans DEMO Regular, sans-serif"},h3:{fontWeight:"normal"},faq:{margin:"10px"},question:{padding:"10px",backgroundColor:"white",marginBottom:"10px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",border:"2px solid #ddd",borderRadius:"10px",boxShadow:"0 3px 5px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s, border-color 0.3s","&:hover":{backgroundColor:"#f0f0f0",borderColor:"blue","& $plusCircle":{backgroundColor:"blue",borderColor:"blue"}}},answer:{display:"block",marginTop:"5px",backgroundColor:"#F9F9F9",marginBottom:"10px",padding:"10px",textAlign:"left",borderRadius:"0 0 5px 5px","& p":{margin:"0"}},plusCircle:{display:"inline-block",width:"20px",height:"20px",backgroundColor:"white",border:"2px solid #ddd",borderRadius:"50%",marginLeft:"10px",transition:"background-color 0.3s, border-color 0.3s"},plusSign:{display:"block",color:"#ddd",textAlign:"center",lineHeight:"18px"},active:{padding:"10px",backgroundColor:"white",cursor:"pointer",borderColor:"blue",display:"flex",justifyContent:"space-between",alignItems:"center",border:"2px solid #ddd",borderRadius:"10px",boxShadow:"0 3px 5px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s, border-color 0.3s","& $plusCircle":{backgroundColor:"blue",borderColor:"blue"},"& $plusSign":{color:"white"}}})))(Object(c.b)((e=>({})),(e=>({})))(Us));class zs extends i.Component{constructor(e){super(e),this.toggleAnswer=()=>{this.setState((e=>({isActive:!e.isActive})))},this.state={isActive:!1}}componentDidMount(){window.gtag("event","page_view",{page_path:"/about"})}render(){const{classes:e}=this.props,{isActive:t}=this.state;return Object(s.jsxs)("section",{className:e.section,children:[Object(s.jsx)(B,{className:e.header}),Object(s.jsxs)(q.a,{container:!0,className:e.grid,spacing:3,children:[Object(s.jsx)(q.a,{item:!0,xs:12,children:Object(s.jsx)(G.a,{variant:"h4",children:"About"})}),Object(s.jsx)(q.a,{item:!0,xs:3,children:Object(s.jsx)(ea,{dataAdSlot:"3646789906"})}),Object(s.jsxs)(q.a,{item:!0,xs:6,style:{marginBottom:"16px"},children:[Object(s.jsx)(Gs,{question:"What is ERDPlus?",answer:"ERDPlus is an online tool for creating Entity-Relationship Diagrams (ERDs), Relational Schemas, Star Schemas, and SQL DDL statements. ERDPlus allows you to visualize your database diagrams and create your databases quickly and efficiently."}),Object(s.jsx)(Gs,{question:"Is ERDPlus free to use?",answer:"Yes, ERDPlus is a free software plan that allows you to create and save your diagrams."}),Object(s.jsx)(Gs,{question:"How do I get started with ERDPlus?",answer:"To get started with ERDPlus, simply visit the website and sign up for a free account. Once registered, you can begin creating your database diagrams and schemas right away. You can also sign in with your Google account."}),Object(s.jsx)(Gs,{question:"Can I export the images of my diagrams from ERDPlus?",answer:"Yes, ERDPlus allows you to export images as PNG files using the Export Image option in the Menu tab when you create or open your diagram."}),Object(s.jsx)(Gs,{question:"Is ERDPlus suitable for academic and professional use?",answer:"Yes, ERDPlus is used by academics, students, and professionals in database development in over 180 countries across the world."}),Object(s.jsx)(Gs,{question:"Do I need to install any software to use ERDPlus?",answer:"No, ERDPlus is a web-based application, and you can access it through your web browser. There is no need to install any software on your computer."}),Object(s.jsx)(Gs,{question:"What types of diagrams can I create with ERDPlus?",answer:"ERDPlus supports the creation of Entity-Relationship Diagrams (ERDs), Relational Schemas, Star Schemas, and SQL DDL statements."})]}),Object(s.jsx)(q.a,{item:!0,xs:3,children:Object(s.jsx)(ea,{dataAdSlot:"2450926600"})})]})]})}}var Ws=Object(m.a)((e=>({section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{padding:e.spacing(3),textAlign:"center",marginTop:"48px",marginBottom:e.spacing(1)},body:{fontFamily:"Mastro Sans DEMO Regular, sans-serif"},header:{position:"fixed",width:"100%",zIndex:1e3}})))(Object(c.b)((e=>({})),(e=>({})))(zs)),Hs=a(370),Ks=a(348);const{Types:Ys,Creators:Qs}=Object(g.createActions)({executeSql:["sql"],executeSqlSuccess:["executeSqlData"],setSqlText:["sql"],setSchema:["schema"],setDisableButton:["disableButton"],schemaPreviewShow:null,schemaPreviewCancel:null}),Vs=Object(g.createReducer)({sql:null,schema:null,executeSqlData:null,disableButton:!1},{[Ys.EXECUTE_SQL]:e=>e,[Ys.EXECUTE_SQL_SUCCESS]:(e,t)=>({...e,executeSqlData:t.executeSqlData}),[Ys.SET_SQL_TEXT]:(e,t)=>({...e,sql:t.sql}),[Ys.SET_SCHEMA]:(e,t)=>({...e,schema:t.schema}),[Ys.SET_DISABLE_BUTTON]:(e,t)=>({...e,disableButton:t.disableButton}),[Ys.SCHEMA_PREVIEW_SHOW]:e=>({...e,showPreview:!0}),[Ys.SCHEMA_PREVIEW_CANCEL]:e=>({...e,showPreview:!1})}),$s=Ys;var Js=Qs,Xs=a(187),Zs=a.n(Xs);class ei extends i.Component{constructor(...e){super(...e),this.handleCancel=()=>{this.props.schemaPreviewCancel()}}render(){const{schema:e,showPreview:t,classes:a}=this.props;return Object(s.jsxs)(ct.a,{fullScreen:!0,open:t,"aria-labelledby":"preview-schema-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(s.jsx)(pt.a,{id:"preview-schema-dialog",children:`Schema preview: ${null===e||void 0===e?void 0:e.toUpperCase()}`}),Object(s.jsxs)(ht.a,{children:["zagi"===e&&Object(s.jsx)("img",{alt:"Schema of ZAGI Second Edition",src:"ZAGI.png"}),"hafh"===e&&Object(s.jsx)("img",{alt:"Schema of HAFH Second Edition",src:"HAFH_2.png"}),"extructaym"===e&&Object(s.jsx)("img",{alt:"Schema of HAFH Second Edition",src:"ExtructaYM.png"})]}),Object(s.jsx)(dt.a,{children:Object(s.jsx)(p.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"})})]})}}var ti=Object(m.a)((e=>({dialog:{margin:"30px"},input:{width:300}})))(Object(c.b)((e=>({schema:e.sqlQueries.schema,showPreview:e.sqlQueries.showPreview})),(e=>({schemaPreviewCancel:()=>e(Js.schemaPreviewCancel())})))(Object(ut.a)()(ei))),ai=a(380);function si(e){return Object(s.jsx)(Ba.a,{children:Object(s.jsx)(qa.a,{children:e.map(((e,t)=>Object(s.jsx)(La.a,{children:e},t)))})})}function ii(e){return Object(s.jsx)(_a.a,{children:e.map(((e,t)=>Object(s.jsx)(qa.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:e.map(((e,a)=>Object(s.jsx)(La.a,{children:e},`${t}-${a}`)))},t)))})}class ni extends i.Component{constructor(...e){super(...e),this.handlePostSqlClick=()=>{this.props.setDisableButton(!0);const e={schema:this.props.schema,sql:this.props.sql};setTimeout((()=>{this.props.setDisableButton(!1)}),2e3),this.props.executeSql(e)},this.handleSqlTextChanged=e=>{this.props.setSqlText(e.target.value)},this.handleChemaSelectChange=e=>{this.props.setSchema(e.target.value)}}componentDidMount(){window.gtag("event","page_view",{page_path:"/sql-queries"})}render(){var e,t,a;const{classes:i,sql:n,schema:o,executeSqlData:r,buttonDisabled:l}=this.props,c=r;let d=null,h=null;return(null===c||void 0===c||null===(e=c.columns)||void 0===e?void 0:e.length)>0&&(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.length)>0&&!c.error&&(h=c.columns,d=c.data),Object(s.jsxs)("section",{className:i.page,children:[Object(s.jsx)(B,{}),Object(s.jsx)(ti,{schema:o}),Object(s.jsxs)("div",{className:i.content,children:[Object(s.jsx)(ea,{className:i.headerAdd,dataAdSlot:"3011416617"}),Object(s.jsxs)("div",{className:i.spacedApartLine,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(G.a,{variant:"h6",children:"Run your SQL queries"}),Object(s.jsx)(G.a,{className:i.description,children:'Here, you can run queries on datasets from "Database Systems: Introduction to Databases and Data Warehouses, 2nd Edition"'})]}),Object(s.jsxs)("div",{className:i.schemaAndExecute,children:[Object(s.jsxs)("div",{className:i.infoAndSelect,children:[o&&Object(s.jsx)(ai.a,{title:"Click to see schema preview",placement:"top",children:Object(s.jsxs)(p.a,{variant:"contained",color:"default",onClick:()=>this.props.schemaPreviewShow(),className:i.schemaInfoButton,disabled:!o,children:[Object(s.jsx)(Zs.a,{className:i.infoButton}),Object(s.jsx)(s.Fragment,{children:"Schema info"})]})}),Object(s.jsxs)(St.a,{children:[Object(s.jsx)(Ks.a,{id:"demo-select-small-label",children:"Choose schema"}),Object(s.jsxs)(Ta.a,{labelId:"demo-select-small-label",id:"demo-select-small",label:"Schema",className:i.schemaSelect,value:o,onChange:this.handleChemaSelectChange,children:[Object(s.jsx)(Ne.a,{value:"zagi",children:"ZAGI (second edition)"}),Object(s.jsx)(Ne.a,{value:"hafh",children:"HAFH (second edition)"}),Object(s.jsx)(Ne.a,{value:"extructaym",children:"ExtructaYM"})]})]})]}),Object(s.jsx)(p.a,{variant:"contained",color:"primary",onClick:this.handlePostSqlClick,className:i.executeButton,disabled:!n||!o||l,children:"Execute SQL Query"})]})]}),Object(s.jsx)(U.a,{className:i.textContainer,multiline:!0,rows:6,label:"SQL Query",variant:"outlined",value:n,onChange:this.handleSqlTextChanged,InputLabelProps:{shrink:!0},placeholder:"e.g. 'SELECT * FROM table_name'"}),d&&h&&Object(s.jsx)(Hs.a,{component:z.a,className:i.resultTable,children:Object(s.jsxs)(Pa.a,{sx:{minWidth:650},"aria-label":"simple table",children:[si(h),ii(d)]})}),0===(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.length)&&Object(s.jsx)(G.a,{variant:"h6",children:"No data returned from the query"}),(null===c||void 0===c?void 0:c.error)&&Object(s.jsx)(G.a,{variant:"h6",color:"error",children:null===c||void 0===c?void 0:c.error}),Object(s.jsx)(ea,{dataAdSlot:"5467756232"})]})]})}}var oi=Object(m.a)((e=>({page:{height:"100%"},content:{height:"100%",width:"100%",display:"flex",flexFlow:"column",padding:"0px 16px",gap:"12px"},textContainer:{width:"100%"},resultTable:{width:"100%",maxHeight:"400px"},headerAdd:{},spacedApartLine:{display:"flex",justifyContent:"space-between",gap:"12px",alignItems:"end",marginTop:"-10px"},schemaSelect:{width:"200px"},schemaAndExecute:{display:"flex",flexDirection:"row",alignItems:"center",gap:"12px"},executeButton:{marginTop:"10px"},schemaInfoButton:{marginTop:"10px",marginRight:"10px"},description:{fontSize:"12px"},infoContainer:{height:"15px",width:"15px",marginTop:"-4px"},infoButton:{height:"15px",width:"15px",marginRight:"5px"},infoAndSelect:{display:"flex",flexDirection:"row",gap:"5px"}})))(Object(c.b)((e=>({sql:e.sqlQueries.sql,schema:e.sqlQueries.schema,executeSqlData:e.sqlQueries.executeSqlData,buttonDisabled:e.sqlQueries.disableButton})),(e=>({executeSql:t=>e(Js.executeSql(t)),setSqlText:t=>e(Js.setSqlText(t)),setSchema:t=>e(Js.setSchema(t)),setDisableButton:t=>e(Js.setDisableButton(t)),schemaPreviewShow:()=>e(Js.schemaPreviewShow())})))(ni));const ri=Object(d.a)({...Ls});class li extends i.Component{componentDidMount(){this.props.verifyToken(this.props.history)}render(){const{isLoggedIn:e,verifyTokenComplete:t}=this.props;return Object(s.jsxs)(h.a,{theme:ri,children:[!t&&Object(s.jsx)(l.a,{component:qs}),t&&Object(s.jsxs)(l.c,{children:[Object(s.jsx)(l.a,{exact:!0,path:"/",component:Ss}),Object(s.jsx)(l.a,{exact:!0,path:"/about",component:Ws}),Object(s.jsx)(l.a,{exact:!0,path:"/privacy-policy",component:Cs}),Object(s.jsx)(l.a,{exact:!0,path:"/reset-password/:token",component:gs}),!e&&Object(s.jsx)(l.a,{exact:!0,path:"/standalone",component:ks}),!e&&Object(s.jsx)(l.a,{exact:!0,path:"/login",component:vs}),!e&&Object(s.jsx)(l.a,{exact:!0,path:"/create-account",component:ee}),!e&&Object(s.jsx)(l.a,{exact:!0,path:"/forgot-password",component:Os}),e&&Object(s.jsx)(l.a,{exact:!0,path:"/account",component:X}),e&&Object(s.jsx)(l.a,{exact:!0,path:"/documents",component:sa}),e&&Object(s.jsx)(l.a,{exact:!0,path:"/sql-queries",component:oi}),e&&Object(s.jsx)(l.a,{exact:!0,path:"/edit-diagram/:id",component:cs}),Object(s.jsx)(l.a,{component:Ps})]})]})}}var ci=Object(l.f)(Object(c.b)((e=>({isLoggedIn:e.auth.isLoggedIn,verifyTokenComplete:e.auth.verifyTokenComplete})),(e=>({verifyToken:t=>e(f.verifyToken(t)),getFolders:()=>e(st.getFolders()),getDiagrams:()=>e(_e.getDiagrams()),getAccount:()=>e(Q.getAccount())})))(li)),di=a(372);var hi=function({history:e}){return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsx)(di.a,{}),Object(s.jsx)(l.b,{history:e,children:Object(s.jsx)(ci,{})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mi=a(55),pi=a(190),ui=a(3),bi=a(133),ji=a.n(bi),gi=a(188),xi=a.n(gi);const Oi="ApiToken",yi=()=>window.localStorage.getItem(Oi),Ci=e=>{window.localStorage.setItem(Oi,e)},fi=()=>{window.localStorage.removeItem(Oi)},Si=e=>{try{return e?xi()(e):null}catch(t){return fi(),null}};var wi={...{apiUrl:"https://delcgtquxh.execute-api.us-east-1.amazonaws.com/prod/",apiUrl2:"https://i9fxmmgh6l.execute-api.us-east-1.amazonaws.com/api/query/legacy/"}};const Di=ji.a.create({baseURL:wi.apiUrl}),vi=ji.a.create({baseURL:wi.apiUrl2,headers:{accept:"application/json"}});function Ai(){const e={accept:"application/json"},t=yi();return t&&(e.Authorization=t),e}function Ei(e){return Di.get(e,{headers:Ai()})}function Ti(e,t){return Di.post(e,t,{headers:Ai()})}function Ii(e,t){return Di.put(e,t,{headers:Ai()})}function Ni(e){return Di.delete(e,{headers:Ai()})}function Ri(){return Ei("/api/session")}function Mi(e){return Ti("/api/session",e)}function ki(e){return Ti("/api/google-session",e)}function Fi(){return Ei("/api/folders")}function Pi(e){return Ti("/api/folders",e)}function _i(e){return Ii(`/api/folders/${e.id}`,e)}function Li(e){return Ni(`/api/folders/${e}`)}function Bi(){return Ni("/api/folders/trash")}function qi(){return Ei("/api/diagrams")}function Ui(e){return Ii(`/api/diagrams/${e.id}`,e)}function Gi(e){return Ti("/api/diagrams",e)}function zi(e){return Ni(`/api/diagrams/${e}`)}function Wi(){return Ei("/api/account")}function Hi(e){return Ti("/api/account",e)}function Ki(e){return Ii("/api/account",e)}function Yi(){return Ni("/api/account")}function Qi(e){return Ti("/api/account/password",e)}function Vi(e){return Ti("/api/account/migrate-social",e)}function $i(e){return Ti("/api/reset-password",e)}function Ji(e){return Ii(`/api/reset-password/${e.token}`,{password:e.password})}function Xi(e){return t=`${e.schema}`,a={sql:e.sql},vi.post(t,a);var t,a}function*Zi(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Mi,{email:e.email,password:e.password})).data.accessToken;Ci(t);const a=Si(t);yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.getFolders()),yield Object(ui.c)(Q.getAccount()),yield Object(ui.c)(f.loginSuccess(a)),e.history.push("/documents")}catch(t){yield Object(ui.c)(v.showToast("Unknown account or password",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*en(e){try{yield Object(ui.c)(v.setBusy()),fi(),yield Object(ui.c)(f.logoutSuccess()),yield Object(ui.c)(_e.getDiagramsSuccess([])),yield Object(ui.c)(st.getFoldersSuccess([])),yield Object(ui.c)(Q.getAccountSuccess({})),e.history.push("/")}catch(t){yield Object(ui.c)(v.showToast("Error"))}finally{yield Object(ui.c)(v.clearBusy())}}const tn=new RegExp("^(/account|/documents|/edit-diagram)");function*an(e){try{yield Object(ui.c)(v.setBusy());if(200===(yield Object(ui.b)(Ri)).status){const e=Si(yi());yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.getFolders()),yield Object(ui.c)(Q.getAccount()),yield Object(ui.c)(f.verifyTokenSuccess(e))}else tn.test(e.history.location.pathname)&&e.history.push("/"),yield Object(ui.b)(fi),yield Object(ui.c)(f.verifyTokenFailure())}catch(t){tn.test(e.history.location.pathname)&&e.history.push("/"),yield Object(ui.b)(fi),yield Object(ui.c)(f.verifyTokenFailure())}finally{yield Object(ui.c)(v.clearBusy())}}function*sn(e){try{yield Object(ui.c)(v.setBusy());const t=e.idToken,a=(yield Object(ui.b)(ki,{idToken:t})).data.accessToken;Ci(a);const s=Si(a);yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.getFolders()),yield Object(ui.c)(Q.getAccount()),yield Object(ui.c)(f.loginSuccess(s)),e.history.push("/documents")}catch(t){yield Object(ui.c)(v.showToast("Google login failed",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*nn(){yield Object(ui.d)(C.LOGIN,Zi)}function*on(){yield Object(ui.d)(C.LOGOUT,en)}function*rn(){yield Object(ui.d)(C.VERIFY_TOKEN,an)}function*ln(){yield Object(ui.d)(C.GOOGLE_LOGIN,sn)}function*cn(){try{yield Object(ui.c)(v.setBusy());const e=(yield Object(ui.b)(Fi)).data;yield Object(ui.c)(st.getFoldersSuccess(e))}catch(e){yield Object(ui.c)(v.showToast("Error",e))}finally{yield Object(ui.c)(v.clearBusy())}}function*dn(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Pi,{name:e.name,parentId:e.parentId})).data;yield Object(ui.c)(st.createFolderSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*hn(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(_i,e.folder)).data;yield Object(ui.c)(st.renameFolderSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*mn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(Li,e.folderId),yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.getFolders()),yield Object(ui.c)(st.deleteFolderSuccess())}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*pn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(Bi),yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.emptyTrashSuccess())}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*un(){yield Object(ui.d)(at.GET_FOLDERS,cn)}function*bn(){yield Object(ui.d)(at.CREATE_FOLDER,dn)}function*jn(){yield Object(ui.d)(at.RENAME_FOLDER,hn)}function*gn(){yield Object(ui.d)(at.DELETE_FOLDER,mn)}function*xn(){yield Object(ui.d)(at.EMPTY_TRASH,pn)}const On="er",yn="relational",Cn="star",fn=["Entity","Attribute","Relationship"],Sn=["Table"],wn=["Dimension","Fact"];var Dn=(e,t)=>new Promise(((a,s)=>{const i=new FileReader;i.onabort=()=>{s({name:e.name,ok:!1})},i.onerror=()=>{s({name:e.name,ok:!1})},i.onload=i=>{try{const s=JSON.parse(i.target.result),n=(e=>{if(e&&Array.isArray(e.shapes)){const t=e.shapes;if(-1!==t.findIndex((e=>fn.includes(e.type))))return On;if(-1!==t.findIndex((e=>Sn.includes(e.type))))return yn;if(-1!==t.findIndex((e=>wn.includes(e.type))))return Cn}throw new Error("Unkwnon Diagram Type")})(s);a({name:e.name,ok:!0,diagram:{folderId:t,name:e.name,diagramType:n,content:JSON.stringify(s)}})}catch(n){s({name:e.name,ok:!1})}},i.readAsText(e)}));const vn=window.erd;var An=(e,t,a)=>{const s={activeItemChangedCallback:()=>{},startMoveCallback:()=>{},endMoveCallback:()=>{},connectModeEndCallback:()=>{},dirtyCallback:()=>{},mouseModeResetCallback:()=>{}};return new Promise(((i,n)=>{const o=document.createElement("canvas"),r=document.createElement("canvas"),l=new vn.DiagramStage(o,s);new vn.DiagramArchive(l).fromJson(e);const c=l.getBounds(!1);let d=c.left*a,h=c.right*a,m=c.top*a,p=c.bottom*a,u=h-d,b=p-m;d>0&&(d-=2,u+=2),m>0&&(m-=2,b+=2),o.width=h,o.height=p,r.width=u+50,r.height=b+50,l.setScale(a,a),l.draw();const j=r.getContext("2d");j.clearRect(0,0,r.width,r.height),t||(j.beginPath(),j.fillStyle="#fff",j.rect(0,0,r.width,r.height),j.fill()),j.drawImage(o,d,m,u,b,25,25,u,b);const g=r.toDataURL("image/png");r.toBlob((e=>{i({dataUrl:g,blob:e})}))}))};function*En(){try{yield Object(ui.c)(v.setBusy());const e=(yield Object(ui.b)(qi)).data;yield Object(ui.c)(_e.getDiagramsSuccess(e))}catch(e){yield Object(ui.c)(v.showToast("Error",e))}finally{yield Object(ui.c)(v.clearBusy())}}function*Tn(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Ui,e.diagram)).data;yield Object(ui.c)(_e.saveDiagramSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*In(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Gi,e.diagram)).data;yield Object(ui.c)(_e.createDiagramSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Nn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(zi,e.diagramId),yield Object(ui.c)(_e.getDiagrams())}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Rn(e){try{yield Object(ui.c)(v.setBusy());const t=yield Object(ui.b)(Dn,e.file,e.currentFolderId);yield Object(ui.c)(_e.dropImportFileSuccess(t))}catch(t){yield Object(ui.c)(_e.dropImportFileFailure(t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Mn(e){try{yield Object(ui.c)(v.setBusy());const t=e.diagrams,a=(yield Object(ui.a)(t.map((e=>Object(ui.b)(Gi,e))))).map((e=>e.data));yield Object(ui.c)(_e.importDiagramsSuccess(a))}catch(t){yield Object(ui.c)(_e.importDiagramsFailure())}finally{yield Object(ui.c)(v.clearBusy())}}function*kn(e){try{const{diagramContent:t,transparent:a,scale:s}=e,i=yield Object(ui.b)(An,t,a,s);yield Object(ui.c)(lt.createExportImageDataSuccess(i.dataUrl,i.blob))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}}function*Fn(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.a)(e.diagrams.map((e=>Object(ui.b)(Ui,e))))).map((e=>e.data));yield Object(ui.c)(_e.saveManyDiagramsSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Pn(){yield Object(ui.d)(Pe.GET_DIAGRAMS,En)}function*_n(){yield Object(ui.d)(Pe.SAVE_DIAGRAM,Tn)}function*Ln(){yield Object(ui.d)(Pe.CREATE_DIAGRAM,In)}function*Bn(){yield Object(ui.d)(Pe.DELETE_DIAGRAM,Nn)}function*qn(){yield Object(ui.d)(Pe.DROP_IMPORT_FILE,Rn)}function*Un(){yield Object(ui.d)(Pe.IMPORT_DIAGRAMS,Mn)}function*Gn(){yield Object(ui.d)(rt.CREATE_EXPORT_IMAGE_DATA,kn)}function*zn(){yield Object(ui.d)(Pe.SAVE_MANY_DIAGRAMS,Fn)}function*Wn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(Hi,{name:e.name,email:e.email,password:e.password}),yield Object(ui.c)(f.login(e.email,e.password,e.history))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Hn(e){try{yield Object(ui.c)(v.setBusy());const e=(yield Object(ui.b)(Wi)).data;yield Object(ui.c)(Q.getAccountSuccess(e))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Kn(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Ki,{name:e.name})).data;yield Object(ui.c)(Q.updateAccountSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Yn(e){try{yield Object(ui.c)(v.setBusy());const{currentPassword:t,newPassword:a}=e;yield Object(ui.b)(Qi,{currentPassword:t,newPassword:a}),yield Object(ui.c)(Q.changePasswordSuccess())}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Qn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(Yi),fi(),yield Object(ui.c)(f.logoutSuccess()),yield Object(ui.c)(_e.getDiagramsSuccess([])),yield Object(ui.c)(st.getFoldersSuccess([])),yield Object(ui.c)(Q.getAccountSuccess({})),e.history.push("/")}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Vn(e){try{yield Object(ui.c)(v.setBusy()),yield Object(ui.b)(Vi,{email:e.email,password:e.password}),yield Object(ui.c)(f.login(e.email,e.password,e.history))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*$n(){yield Object(ui.d)(Y.CREATE_ACCOUNT,Wn)}function*Jn(){yield Object(ui.d)(Y.GET_ACCOUNT,Hn)}function*Xn(){yield Object(ui.d)(Y.UPDATE_ACCOUNT,Kn)}function*Zn(){yield Object(ui.d)(Y.CHANGE_PASSWORD,Yn)}function*eo(){yield Object(ui.d)(Y.DELETE_ACCOUNT,Qn)}function*to(){yield Object(ui.d)(Y.DO_SOCIAL_MIGRATION,Vn)}function*ao(e){try{yield Object(ui.c)(v.setBusy());const t=yield Object(ui.b)($i,{email:e.email}),{email:a,duration:s}=t.data;yield Object(ui.c)(us.resetPasswordStartSuccess(a,s))}catch(t){yield Object(ui.c)(us.resetPasswordStartFailure("some error")),yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*so(e){try{yield Object(ui.c)(v.setBusy());const t=yield Object(ui.b)(Ji,{token:e.token,password:e.password});yield Object(ui.c)(us.resetPasswordCompleteSuccess());const a=t.data.accessToken;Ci(a);const s=Si(a);yield Object(ui.c)(_e.getDiagrams()),yield Object(ui.c)(st.getFolders()),yield Object(ui.c)(Q.getAccount()),yield Object(ui.c)(f.loginSuccess(s)),e.history.push("/documents")}catch(t){yield Object(ui.c)(us.resetPasswordCompleteFailure("some error")),yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*io(){yield Object(ui.d)(ps.RESET_PASSWORD_START,ao)}function*no(){yield Object(ui.d)(ps.RESET_PASSWORD_COMPLETE,so)}let oo=a(160).format;function ro(e){this.er="string"===typeof e?JSON.parse(e):e}ro.prototype.convert=function(){return this.init(),this.convertRegularEntities(),this.convertSupertypeRelationships(),this.convertRegularRelationships(),this.convertUnaryRelationships(),this.convertPendingMultivaluedAttributes(),this.convertPendingAssociativeEntities(),this.positionTables(),this.rs},ro.prototype.init=function(){this.pendingMultivaluedAttributes=[],this.pendingAssociativeEntities=[],this.idMap={},this.nextId=1,this.relationshipHistory=[],this.rs={version:2,www:"erdplus.com",shapes:[],connectors:[],width:this.er.width,height:this.er.height}},ro.prototype.convertRegularEntities=function(){let e=this.er.shapes.filter((e=>"Entity"===e.type));for(let t of e){let e=this.newTable(t.details.id);e.details.name=t.details.name,this.convertEntityAttributes(e,t),this.rs.shapes.push(e),"associative"===t.details.type&&this.pendingAssociativeEntities.push(e)}},ro.prototype.convertPendingAssociativeEntities=function(){for(let e of this.pendingAssociativeEntities)for(let t of e.details.attributes)t.fk&&(t.pkMember=!0)},ro.prototype.convertEntityAttributes=function(e,t){let a,s=this.getAttributesByOwnerId(t.details.id);if(!t.details.isSubtype){for(let e of s)void 0!==a||!e.details.isUnique||"string"!==typeof e.details.name||"id"!==e.details.name.substr(-2).toLowerCase()||e.details.isDerived||e.details.isComposite||e.details.isMultivalued||(a=e.details.id);for(let e of s)void 0!==a||!e.details.isUnique||e.details.isDerived||e.details.isComposite||e.details.isMultivalued||(a=e.details.id);for(let e of s)void 0===a&&e.details.isUnique&&!e.details.isDerived&&e.details.isComposite&&!e.details.isMultivalued&&(a=e.details.id)}for(let i of s)if(i.details.isDerived);else if(i.details.isComposite){let t=this.convertComponentAttributes(this.getAttributesByOwnerId(i.details.id));if(i.details.isUnique)if(i.details.id===a)t.forEach((e=>{e.pkMember=!0}));else{let a=t.map((e=>e.id));e.details.uniqueGroups.push(a)}e.details.attributes=e.details.attributes.concat(t)}else if(i.details.isMultivalued)this.pendingMultivaluedAttributes.push({table:e,entity:t,attribute:i});else{let t=this.newColumn(i.details.id);t.names.push(i.details.name),t.optional=i.details.isOptional,i.details.isUnique&&(i.details.id===a?t.pkMember=!0:t.soloUnique=!0),e.details.attributes.push(t)}},ro.prototype.convertComponentAttributes=function(e){let t=[];for(let a of e){let e=this.newColumn(a.details.id);e.names.push(a.details.name),t.push(e)}return t},ro.prototype.convertPendingMultivaluedAttributes=function(){for(let e of this.pendingMultivaluedAttributes){let t=this.newColumn();t.pkMember=!0,t.names.push(e.attribute.details.name);let a=this.newTable();a.details.name=oo("%s_%s",e.table.details.name,e.attribute.details.name),a.details.attributes.push(t),this.rs.shapes.push(a),this.connectTables(e.table,a).pkMember=!0}},ro.prototype.convertRegularRelationships=function(){let e=this.er.shapes.filter((e=>"Relationship"===e.type&&e.details.slots[0].entityId!==e.details.slots[1].entityId));for(let t of e)t.details.isIdentifying&&this.convertOneRelationship(t);for(let t of e)t.details.isIdentifying||this.convertOneRelationship(t)},ro.prototype.convertSupertypeRelationships=function(){const e=this.er.connectors.filter((e=>"Connector"===e.type&&e.details.isSupertypeConnector));for(let t of e){this.connectTables(t.destination,t.source).pkMember=!0}},ro.prototype.convertOneRelationship=function(e){let t=e.details.slots;if("one"===t[0].cardinality&&"one"===t[1].cardinality){let a;"optional"===t[0].participation&&"optional"===t[1].participation?(a=this.connectTables(t[0].entityId,t[1].entityId,e),a.optional=!0):a="mandatory"===t[1].participation?this.connectTables(t[0].entityId,t[1].entityId,e):this.connectTables(t[1].entityId,t[0].entityId,e),a.pkMember=e.details.isIdentifying}else if("one"===t[0].cardinality&&"many"===t[1].cardinality){let a=this.connectTables(t[1].entityId,t[0].entityId,e);a.optional="optional"===t[0].participation,a.pkMember=e.details.isIdentifying}else if("many"===t[0].cardinality&&"one"===t[1].cardinality){let a=this.connectTables(t[0].entityId,t[1].entityId,e);a.optional="optional"===t[1].participation,a.pkMember=e.details.isIdentifying}else if("many"===t[0].cardinality&&"many"===t[1].cardinality){let a=this.newTable(e.details.id);this.rs.shapes.push(a),a.details.name=e.details.name;let s=this.connectTables(t[0].entityId,a,e),i=this.connectTables(t[1].entityId,a,e),n=!1,o=this.getAttributesByOwnerId(e.details.id);for(let e of o){let t=this.newColumn(e.details.id);t.names.push(e.details.name),!n&&e.details.isUnique&&(t.pkMember=!0,n=!0),a.details.attributes.push(t)}n?a.details.uniqueGroups.push([s.id,i.id]):(s.pkMember=!0,i.pkMember=!0)}},ro.prototype.convertUnaryRelationships=function(){let e=this.er.shapes.filter((e=>"Relationship"===e.type&&!e.details.isIdentifying&&e.details.slots[0].entityId===e.details.slots[1].entityId));for(let t of e){let e=t.details.slots;if("one"===e[0].cardinality||"one"===e[1].cardinality){let a=this.connectTables(e[0].entityId,e[1].entityId,t);a.names[0]=oo("%s_%s",t.details.name,a.names[0]),a.optional="optional"===e[0].participation||"optional"===e[1].participation}else if("many"===e[0].cardinality&&"many"===e[1].cardinality){let a=this.newTable(t.details.id);a.details.name=t.details.name,this.rs.shapes.push(a);let s=this.connectTables(e[0].entityId,t.details.id,t);s.names[0]=oo("%s_1",s.names[0]),s.pkMember=!0;let i=this.connectTables(e[0].entityId,t.details.id,t);i.names[0]=oo("%s_2",i.names[0]),i.pkMember=!0}}},ro.prototype.newTable=function(e){return{type:"Table",details:{name:"",x:0,y:0,sort:"automatic",attributes:[],uniqueGroups:[],id:this.mapId(e)}}},ro.prototype.newColumn=function(e){return{names:[],order:0,pkMember:!1,optional:!1,soloUnique:!1,fk:!1,dataType:"int",dataTypeSize:null,id:this.mapId(e)}},ro.prototype.newConnector=function(){return{type:"TableConnector",details:{fkAttributeId:null,id:this.mapId()},source:null,destination:null}},ro.prototype.createFk=function(e){let t=this.newColumn();t.references=[],t.fk=!0;for(let a=0;a<e.details.attributes.length;++a){let s=e.details.attributes[a];if(s.pkMember)if(s.fk)for(let a=0;a<s.names.length;++a)t.names.push(s.names[a]),t.references.push({tableId:e.details.id,attributeId:s.id,fkSubIndex:a});else t.names.push(s.names[0]),t.references.push({tableId:e.details.id,attributeId:s.id})}return t},ro.prototype.connectTables=function(e,t,a){"number"===typeof e&&(e=this.findTableyByMappedId(e)),"number"===typeof t&&(t=this.findTableyByMappedId(t));let s=this.recordRelationshipHistory(e.details.id,t.details.id),i=this.createFk(e);if(t.details.attributes.push(i),s>1){let e=[];for(let t of i.names)e.push(a.details.name+t);i.names=e}let n=this.newConnector();return n.details.fkAttributeId=i.id,n.source=e.details.id,n.destination=t.details.id,this.rs.connectors.push(n),i},ro.prototype.recordRelationshipHistory=function(e,t){let a=this.relationshipHistory.find((a=>a.pkTableId===e&&a.fkTableId===t));return a?(a.count=a.count+1,a.count):(this.relationshipHistory.push({pkTableId:e,fkTableId:t,count:1}),1)},ro.prototype.mapId=function(e){if(this.idMap.hasOwnProperty(e))return this.idMap[e];{let t=this.nextId;return this.nextId+=1,"number"===typeof e&&(this.idMap[e]=t),t}},ro.prototype.positionTables=function(){let e=this.rs.shapes.filter((e=>"Table"===e.type)),t=Math.ceil(Math.sqrt(e.length)),a=10,s=0;for(;s<e.length;){let i=e.slice(s,s+t);s+=t;let n=0;for(let e=0;e<i.length;++e){let t=i[e];n=Math.max(n,t.details.attributes.length),t.details.x=10+165*e,t.details.y=a}a+=15*(n+1)}},ro.prototype.getAttributesByOwnerId=function(e){return this.er.shapes.filter((t=>"Attribute"===t.type&&this.er.connectors.some((a=>a.source===t.details.id&&a.destination===e))),this)},ro.prototype.findTableyByMappedId=function(e){let t=this.mapId(e);return this.rs.shapes.find((e=>"Table"===e.type&&e.details.id===t))};var lo=ro,co=a(160).format;function ho(e){this.diagram="string"===typeof e?JSON.parse(e):e}ho.prototype.columnTypes=[{id:"none",name:"No Data Type",sql:"NODATATYPE",hasSize:!1},{id:"custom",name:"Custom Data Type",sql:"",hasSize:!0},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0},{id:"int",name:"INT",sql:"INT",hasSize:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0},{id:"date",name:"DATE",sql:"DATE",hasSize:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1}],ho.prototype.generate=function(){return this.initSqlTables(),this.processAttributes(),this.processUnique(),this.resolveFkColumnDataTypes(),this.resolveFkReferenceNames(),this.sortTables(),this.toSqlLines(),this.toSql()},ho.prototype.initSqlTables=function(){this.tables={};for(let e of this.diagram.shapes)"Table"!==e.type&&"Fact"!==e.type&&"Dimension"!==e.type||(this.tables[e.details.id]={name:e.details.name,original:e,columns:{},foreignKeys:[],requiredTables:[]})},ho.prototype.processAttributes=function(){for(let e in this.tables){let t=this.tables[e];for(let e of t.original.details.attributes)if(e.fk){t.foreignKeys.push({names:e.names,references:e.references});let a=0;for(let s in e.names){let i=e.names[s],n=e.references[a];t.columns[co("%s-%s",e.id,a)]={name:i,pkMember:e.pkMember,optional:e.optional,fk:!0,reference:{tableId:n.tableId,columnId:n.attributeId,fkSubIndex:n.fkSubIndex}},a+=1}}else t.columns[e.id]={name:e.names[0],pkMember:e.pkMember,optional:e.optional,dataType:this.getSqlDataType(e.dataType,e.dataTypeSize)}}},ho.prototype.processUnique=function(){for(let e in this.tables){let t=this.tables[e];t.unique=[];for(let e of t.original.details.attributes)e.soloUnique&&!e.pkMember&&t.unique.push([e.id]);t.unique=t.unique.concat(t.original.details.uniqueGroups)}},ho.prototype.resolveFkColumnDataTypes=function(){for(let e in this.tables){let t=this.tables[e];for(let e in t.columns){let a=t.columns[e];a.fk&&(a.dataType=this.resolveDataType(a.reference.tableId,a.reference.columnId,a.reference.fkSubIndex))}}},ho.prototype.resolveDataType=function(e,t,a){let s;if("number"===typeof a){let i=co("%s-%s",t,a);s=this.tables[e].columns[i]}else s=this.tables[e].columns[t];if(void 0===s)return"(not found)";if("string"===typeof s.dataType)return s.dataType;if(s.fk){let e=this.resolveDataType(s.reference.tableId,s.reference.columnId,s.reference.fkSubIndex);return s.dataType=e,e}},ho.prototype.resolveFkReferenceNames=function(){for(let e in this.tables){let t=this.tables[e];for(let e of t.foreignKeys){let t=e.references[0].tableId;e.referencedTableName=this.tables[t].name;for(let a of e.references){let e=this.resolveFkReferenceName(a.tableId,a.attributeId,a.fkSubIndex);a.name=e}}}},ho.prototype.resolveFkReferenceName=function(e,t,a){let s;if("number"===typeof a){let i=co("%s-%s",t,a);s=this.tables[e].columns[i]}else s=this.tables[e].columns[t];return s?s.name:"missing"},ho.prototype.resolveAllFkReferenceNames=function(e,t){let a=[],s=0,i=co("%s-%s",t,s);for(;e.columns.hasOwnProperty(i);)a.push(e.columns[i].name),s+=1,i=co("%s-%s",t,s);return a},ho.prototype.sortTables=function(){for(let s of this.diagram.connectors)if("TableConnector"===s.type){let e=s.source,t=s.destination;this.tables[t].requiredTables.push(e)}let e=[],t=0,a={};do{t=0;for(let s in this.tables){let i=!0;for(let e of this.tables[s].requiredTables)i=i&&a[e];i&&(t+=1,e.push(this.tables[s]),delete this.tables[s],a[s]=!0)}}while(t>0);for(let s in this.tables)e.push(this.tables[s]),delete this.tables[s];this.tables=e},ho.prototype.toSqlLines=function(){for(let a of this.tables){a.lines=[],a.lines.push(this.formatCreateTable(a.name)),a.lines.push("(");var e=[];for(let i in a.columns){var t=a.columns[i];e.push(this.formatColumn(t.name,t.dataType,t.optional))}let s=[];for(let e in a.columns){let t=a.columns[e];t.pkMember&&s.push(t.name)}s.length>0&&e.push(this.formatPrimaryKey(s));for(let t of a.foreignKeys){let a=t.references.map((function(e){return e.name}));e.push(this.formatForeignKey(t.names,a,t.referencedTableName))}for(let t of a.unique){let s=[];for(let e of t)if(void 0===a.columns[e]){let t=this.resolveAllFkReferenceNames(a,e);s=s.concat(t)}else s.push(a.columns[e].name);e.push(this.formatUnique(s))}for(let t=0;t<e.length-1;++t)e[t]=e[t]+",";a.lines=a.lines.concat(e),a.lines.push(");"),a.lines.push("")}},ho.prototype.toSql=function(){let e=[];for(let t of this.tables)e=e.concat(t.lines);return e.join("\n")},ho.prototype.formatCreateTable=function(e){return co("CREATE TABLE %s",this.sanitizeName(e))},ho.prototype.formatColumn=function(e,t,a){return co(a?"  %s %s":"  %s %s NOT NULL",this.sanitizeName(e),t)},ho.prototype.formatUnique=function(e){return co("  UNIQUE (%s)",this.sanitizeName(e).join(", "))},ho.prototype.formatPrimaryKey=function(e){return co("  PRIMARY KEY (%s)",this.sanitizeName(e).join(", "))},ho.prototype.formatForeignKey=function(e,t,a){return co("  FOREIGN KEY (%s) REFERENCES %s(%s)",this.sanitizeName(e).join(", "),this.sanitizeName(a),this.sanitizeName(t).join(", "))},ho.prototype.getSqlDataType=function(e,t){if("custom"===e)return t;{let a=t;return"string"===typeof a&&a.length>0?("("!==a.charAt(0)&&(a="("+a),")"!==a.charAt(a.length-1)&&(a+=")")):a="",co("%s%s",this.mapSqlDataType(e),a)}},ho.prototype.mapSqlDataType=function(e){for(let t=0;t<this.columnTypes.length;++t){let a=this.columnTypes[t];if(a.id===e)return a.sql}return e},ho.prototype.sanitizeName=function(e){if(Array.isArray(e)){let t=[];for(let a of e)t.push(this.sanitizeName(a));return t}return e.replace(new RegExp(" ","g"),"_")};var mo=ho;function*po(e){try{yield Object(ui.c)(v.setBusy());const{folderId:t,name:a,content:s,edit:i,history:n}=e,o=new lo(s),r={folderId:t,name:a,content:JSON.stringify(o.convert()),diagramType:"relational"},l=(yield Object(ui.b)(Gi,r)).data;yield Object(ui.c)(_e.createDiagramSuccess(l)),yield Object(ui.c)(Ge.hideConvertToRelationalDialog()),i&&n.push(`/edit-diagram/${l.id}`)}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*uo(e){try{yield Object(ui.c)(v.setBusy());const{content:t}=e,a=new mo(t).generate();yield Object(ui.c)(Ge.generateSqlSuccess(a))}catch(t){yield Object(ui.c)(v.showToast("Error",t)),yield Object(ui.c)(Ge.generateSqlFailure())}finally{yield Object(ui.c)(v.clearBusy())}}function*bo(){yield Object(ui.d)(Ue.CONVERT_TO_RELATIONAL,po)}function*jo(){yield Object(ui.d)(Ue.GENERATE_SQL,uo)}function*go(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Ui,e.diagram)).data;yield Object(ui.c)(_e.saveDiagramSuccess(t)),yield Object(ui.c)(lt.setIsDirty(!1))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*xo(){yield Object(ui.d)(rt.SAVE_EDIT_DIAGRAM,go)}var Oo=Object(mi.c)({account:K,auth:y,diagram:Fe,edit:ot,folder:tt,resetPassword:ms,convert:qe,global:D,sqlQueries:Vs});function*yo(e){try{yield Object(ui.c)(v.setBusy());const t=(yield Object(ui.b)(Xi,e.sql)).data;yield Object(ui.c)(Js.executeSqlSuccess(t))}catch(t){yield Object(ui.c)(v.showToast("Error",t))}finally{yield Object(ui.c)(v.clearBusy())}}function*Co(){yield Object(ui.d)($s.EXECUTE_SQL,yo)}var fo=a(40);const So=Object(fo.a)(),wo=(()=>{const e=Object(pi.a)(),t=[e].map((e=>Object(mi.a)(e))),a=(0,mi.d)(...t),s=Object(mi.e)(Oo,{},a);return e.run(nn),e.run(on),e.run(rn),e.run(ln),e.run(un),e.run(bn),e.run(jn),e.run(gn),e.run(xn),e.run(Pn),e.run(_n),e.run(Ln),e.run(Bn),e.run(qn),e.run(Un),e.run(Gn),e.run(zn),e.run($n),e.run(Jn),e.run(Xn),e.run(Zn),e.run(eo),e.run(to),e.run(io),e.run(no),e.run(bo),e.run(jo),e.run(xo),e.run(Co),s})();var Do;Do=hi,r.a.render(Object(s.jsx)(c.a,{store:wo,children:Object(s.jsx)(Do,{history:So})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[298,1,2]]]);
//# sourceMappingURL=main.1942dbef.chunk.js.map